base_dirs = ...
    {'/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0018_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0048_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0051_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0056_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0057_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0059_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0060_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0084_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0091_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0093_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0095_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0096_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0104_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0106_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0113_sync';...
     '/nh/compneuro/Data/KITTI/2011_09_26/2011_09_26_drive_0117_sync';...
    };

out_dirs = ...
    {'/nh/compneuro/Data/Depth/depth_data_18';...
     '/nh/compneuro/Data/Depth/depth_data_48';...
     '/nh/compneuro/Data/Depth/depth_data_51';...
     '/nh/compneuro/Data/Depth/depth_data_56';...
     '/nh/compneuro/Data/Depth/depth_data_57';...
     '/nh/compneuro/Data/Depth/depth_data_59';...
     '/nh/compneuro/Data/Depth/depth_data_60';...
     '/nh/compneuro/Data/Depth/depth_data_84';...
     '/nh/compneuro/Data/Depth/depth_data_91';...
     '/nh/compneuro/Data/Depth/depth_data_93';...
     '/nh/compneuro/Data/Depth/depth_data_95';...
     '/nh/compneuro/Data/Depth/depth_data_96';...
     '/nh/compneuro/Data/Depth/depth_data_104';...
     '/nh/compneuro/Data/Depth/depth_data_106';...
     '/nh/compneuro/Data/Depth/depth_data_113';...
     '/nh/compneuro/Data/Depth/depth_data_117';...
    };

parfor i = 1:numel(base_dirs)
    dirname = strcat(base_dirs(i),'/image_00/data/*.png');
    num_frames = numel(dir(char(dirname))) - 1;
    velodyne(char(base_dirs(i)), char(out_dirs(i)), num_frames);
end
