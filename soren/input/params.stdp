//
// params.stdp
//  - input parameters for stdp.cpp, a study of STDP with noise and bars, rectangles
// and letters.
//

//
// This run started from a weights generated by a random background in the retina.
// It used bars randomly displayed at all positions.
//

HyPerCol "column" = {
   nx = 32; //128;   // until we get going with images
   ny = 32; //128;
   dt = .5;
};

//
// Three layers, "Retina"+"Image", "L1", "L1Inh"
//

HyPerLayer "Image" = {
   marginWidth = 0; //CER 2;
   pMove = 0.0; // CER 0.03125;  // every 16 ms
   pSwitch = 0.0;    // switch between horizontal and vertical
   writeImages = 0;  // write out image file when changes   
};

HyPerLayer "Bars" = {
   marginWidth = 0; //CER 2;
   pMove = 0.02; //.06=8ms//0.03125;  // probability of moving (tau ~= 1/pMove = 50 ms)
   pSwitch = 0.0;    // switch between horizontal and vertical
   writeImages = 0;  // write out image file when changes   
};

HyPerLayer "RetinaOn" = {
   nxScale = 1;
   nyScale = 1;
   marginWidth = 0; //CER 2;
   
   beginStim = 0;
   endStim   = 90000000;

   burstFreq = 25; // 0.001; //20;   // Hz
   burstDuration = 7.5; // 1000000;  // ms

   spikingFlag = 1;     // spike as poisson

   noiseOnFreq  = 200;  // (Hz) when this is defined poissonEdge overridden
   noiseOffFreq = 50;   // (Hz) when this is defined poissonBlank overridden
};

HyPerLayer "RetinaOff" = {
   nxScale = 1;
   nyScale = 1;
   marginWidth = 0; //CER 2;
   
   beginStim = 0;
   endStim = 9000000;
   
   burstFreq = 25;
   burstDuration = 7.5;
   
   spikingFlag = 1;
   
   noiseOnFreq = 200;
   noiseOffFreq = 50;
};

HyPerLayer "L1" = {
   nxScale = 2; // 8;
   nyScale = 2; // 8;
   
   //restart = 1;

   marginWidth = 0; //CER 3;
   
   noiseAmpE = 1.0;
   noiseAmpI = 1.0;
};

HyPerLayer "L1Inh" = {
   nxScale = 1; // 8;
   nyScale = 1; // 8;

   marginWidth = 2; // 4;
   
   noiseAmpE = 0.0;
   noiseAmpI = 0.0;
};

///////
// 3 connections: 
//    "Image to RetinaOn Center"
//    "Image to RetinaOn Surround"
//    "L1 to L1Inh"
//    "L1Inh to L1"

HyPerConn "Image to RetinaOn Center" = {
   nxp = 1;
   nyp = 1;
   
   //
   // strength used if randomFlag==0
   strength = 1;
   uniformWeights = 1;
};

HyPerConn "Image to RetinaOn Surround" = {
   nxp = 3;
   nyp = 3;
   
   //
   // strength used if randomFlag==0

   strength = 1;
   uniformWeights = 1;
};


HyPerConn "Image to RetinaOff Center" = {
   nxp = 1;
   nyp = 1;
   
   strength = 1;
   uniformWeights = 1;
};

HyPerConn "Image to RetinaOff Surround" = {
   nxp = 3;
   nyp = 3;
   
   strength = 1;
   uniformWeights = 1;
};

HyPerConn "RetinaOn to L1" = {
   nxp = 8; // 64;
   nyp = 8; // 64;
   
   stdpFlag   = 1;
   randomFlag = 1;
   
   initFromLastFlag = 0;  //CER // restart
   
   //
   // strength used if randomFlag==0

   strength = 1.5;//180;//25.0;  // max strength should be ~3*nxp*nyp

   //
   // these weights used if randomFlag==1

   wMin = 0.0;     
   wMax = 3.0;
   dWMax = 0.04;  // .01;
   
   uniformWeights = 1;

   //wMinInit = 4.0;  // default values if Gaussian is not defined
   //wMaxInit = 5;//6.0; // if not defined uses wMin and wMax.
   //wGaussMean = 5.0;//5.00;
   //wGaussStdev = 0.0;//1.00;
   
   writeStep = 50000; // writes to output file every writeStep

   // default settings not usually changed

   ampLTP = 1.0;
   ampLTD = 1.2; //1.1;
   tauLTP = 20;
   tauLTD = 20;
};

HyPerConn "RetinaOff to L1" = {
   nxp = 8;
   nyp = 8;
   
   stdpFlag   = 1;
   randomFlag = 1;

   initFromLastFlag = 0;
   
   strength = 1.5;
   
   wMin = 0.0;
   wMax = 3.0;
   dWMax = 0.04;
   
   uniformWeights = 1;
   
   writeStep = 50000;

   ampLTP = 1.0;
   ampLTD = 1.2;
   tauLTP = 20;
   tauLTD = 20;
};

HyPerConn "L1 to L1Inh" = {
   nxp = 4;
   nyp = 4;
   strength = 16;
   
   delay = 5;
   
   sigma = 100;
   rMax  = 100;

   writeStep = 1000; // writes to output file every writeStep
};

HyPerConn "L1Inh to L1" = {
   nxp = 8;
   nyp = 8;
   strength = 16;
   delay = 5;

   sigma = 100;
   rMax  = 100;
};
