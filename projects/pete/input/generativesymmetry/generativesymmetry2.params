// generativesymmetry.params
//     input parameters file for a 3-layer generative model with pooling
//     between retina and simple as well as between simple and complex.
//     Uses log-lateral competition between features at the S- and C- layers
//     Image space is eight horizontal and eight vertical lines.

debugParsing = false;

HyPerCol "column" = {
    nx = 8;
    ny = 8;
    dt = 1;
    randomSeed = 1;
    numSteps = 10000;
    outputPath = "output/generativesymmetry/";
    filenamesContainLayerNames = false;
    progressStep = 1000;
    checkpointRead = false;
    checkpointWrite = false;
};

// 20 layers:
//           0 Slideshow                                        Movie
//           1 Retina Pooling 1                         bias 1  PoolingANNLayer
//           2 Retina Pooling 2                         bias -1 PoolingANNLayer
//           3 Retina                                           Retina
//           4 AnaRetina                                        ANNLayer
//           5 CataSimple Pooling 1                     bias 1  PoolingANNLayer
//           6 CataSimple Pooling 2                     bias -1 PoolingANNLayer
//           7 CataSimple Layer                                 ANNLayer
//           8 Simple Layer                                     GenerativeLayer
//           9 AnaSimple Layer                                  ANNLayer
//          10 AnaSimple Pooling 1                      bias 1  PoolingANNLayer
//          11 AnaSimple Pooling 2                      bias -1 PoolingANNLayer
//          12 CataComplex Pooling 1                    bias 1  PoolingANNLayer
//          13 CataComplex Pooling 2                    bias -1 PoolingANNLayer
//          14 CataComplex Layer                                ANNLayer
//          15 Complex Layer                                    GenerativeLayer
//  The last four layers accumulate quantities whose L^2 norm appears in the energy
//          16 Energy AnaRetina                                 PtwiseProductLayer
//          17 Energy CataSimple Layer                          PtwiseProductLayer
//          18 Energy AnaSimple Layer                           PtwiseProductLayer
//          19 Energy CataComplex Layer                         PtwiseProductLayer

Movie "Slideshow" = {
    imageListPath = "./input/generativesymmetry/filenames.txt";

    restart = 0;
    nxScale = 1;
    nyScale = 1;
    nf = 1;
    marginWidth = 0;
    writeStep = -1;
    mirrorBCflag = 0;
    spikingFlag = 0;
    writeNonspikingActivity = -1;
    
    writeImages = 0;

    displayPeriod = 1000;
    jitterFlag = 0;
    randomMovie = 0;
    offsetX = 0;
    offsetY = 0;
};

PoolingANNLayer "Retina Pooling 1" = {
    restart = 0;        
    nxScale = 1;     
    nyScale = 1;     
    nf = 1;             
    marginWidth = 0;    
    writeStep = 1.0;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
    
    bias = 1;
};

PoolingANNLayer "Retina Pooling 2" = {
    restart = 0;        
    nxScale = 1;     
    nyScale = 1;     
    nf = 1;             
    marginWidth = 0;    
    writeStep = -1;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
    
    bias = -1;
};

Retina "Retina" = {
    restart = 0;
    nxScale = 1;
    nyScale = 1;
    nf = 1;
    marginWidth = 0;
    writeStep = 1.0;
    mirrorBCflag = 1;
    spikingFlag = 0;
    writeNonspikingActivity = -1;

    poissonEdgeProb = 1; 
    poissonBlankProb = 0;
    burstFreq = 1;
    burstDuration = 40000;

    beginStim = 1;
    endStim = 40000;
};

ANNLayer "AnaRetina" = {
    restart = 0;
    nxScale = 1;
    nyScale = 1;
    nf = 1;
    marginWidth = 0;
    writeStep = -1;
    mirrorBCflag = 1;
    spikingFlag = 0;
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
};

PoolingANNLayer "CataSimple Pooling 1" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 16;             
    marginWidth = 0;    
    writeStep = 1.0;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
    
    bias = 1;
};

PoolingANNLayer "CataSimple Pooling 2" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 16;             
    marginWidth = 0;    
    writeStep = 1.0;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
    
    bias = -1;
};

ANNLayer "CataSimple Layer" = {
    restart = 0;
    nxScale = 0.125;
    nyScale = 0.125;
    nf = 16;
    marginWidth = 0;    
    writeStep = -1;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
};

LogLatWTAGenLayer "Simple Layer" = {
    restart = 0;
    nxScale = 0.125;
    nyScale = 0.125;
    nf = 16;
    marginWidth = 0;
    writeStep = 1.0;
    mirrorBCflag = 1;
    spikingFlag = 0;
    writeNonspikingActivity = 1;

    // InitVType = "ConstantV";
    // valueV = 0.0;
    InitVType = "InitVFromFile";
    Vfilename = "input/generativesymmetry/correct_y.pvp";

    AMax = infinity;
    VThresh = 0;
    AMin = 0;

    relaxation = 5E-2;
    activityThreshold = 0;
    auxChannelCoeff = -0.5;
    persistence = 0;
    
    sparsityTermCoefficient = 0.5;
};

ANNLayer "AnaSimple Layer" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 16;             
    marginWidth = 0;    
    writeStep = -1;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
};

PoolingANNLayer "AnaSimple Pooling 1" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 16;             
    marginWidth = 0;    
    writeStep = 1.0;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
    
    bias = 1;
};

PoolingANNLayer "AnaSimple Pooling 2" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 16;             
    marginWidth = 0;    
    writeStep = 1.0;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
    
    bias = -1;
};

PoolingANNLayer "CataComplex Pooling 1" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 2;             
    marginWidth = 0;    
    writeStep = 1.0;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
    
    bias = 1;
};

PoolingANNLayer "CataComplex Pooling 2" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 2;             
    marginWidth = 0;    
    writeStep = -1;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
    
    bias = -1;
};

ANNLayer "CataComplex Layer" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 2;             
    marginWidth = 0;    
    writeStep = -1;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
};

TrainingLayer "Complex Layer" = {
    trainingLabelsPath = "input/lineworldsimpler-train/trainlabels.txt";
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 2;             
    marginWidth = 0;    
    writeStep = 1.0;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;
    
    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;

    displayPeriod = 1000;
    distToData = 2;
};

PtwiseProductLayer "Energy AnaRetina" = {
    restart = 0;        
    nxScale = 1;     
    nyScale = 1;     
    nf = 1;             
    marginWidth = 0;    
    writeStep = -1;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
};

PtwiseProductLayer "Energy CataSimple Layer" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 16;             
    marginWidth = 0;    
    writeStep = -1;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
};

PtwiseProductLayer "Energy AnaSimple Layer" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 16;             
    marginWidth = 0;    
    writeStep = -1;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
};

PtwiseProductLayer "Energy CataComplex Layer" = {
    restart = 0;        
    nxScale = 0.125;     
    nyScale = 0.125;     
    nf = 2;             
    marginWidth = 0;    
    writeStep = -1;
    mirrorBCflag = 1;   
    spikingFlag = 0;    
    writeNonspikingActivity = -1;

    InitVType = "ConstantV";
    valueV = 0.0;

    AMax = infinity;
    VThresh = -infinity;
    AMin = -infinity;
};


// 42 connections:
//           0 Slideshow to Retina                          +       IdentConn
//           1 Retina Pooling 1 to Simple Layer             + (A)   PoolingGenConn
//           2 Retina to AnaRetina                          +       IdentConn
//           3 Retina to Retina Pooling 1                   +       IdentConn
//           4 Retina to Retina Pooling 2                   +       IdentConn
//           5 Retina to CataSimple Layer                   - (A)   CloneKernelConn
//           6 AnaRetina to Retina Pooling 1                -       IdentConn
//           7 AnaRetina to Retina Pooling 2                -       IdentConn
//           8 CataSimple Pooling 1 to Simple Layer         -       IdentConn
//           9 CataSimple Pooling 2 to Simple Layer         -       IdentConn
//          10 CataSimple Layer to CataSimple Pooling 1     -       IdentConn
//          11 CataSimple Layer to CataSimple Pooling 2     -       IdentConn
//          12 AnaSimple Pooling 1 to Simple Layer          -       IdentConn
//          13 AnaSimple Pooling 1 to Complex Layer         + (B)   PoolingGenConn
//          14 AnaSimple Pooling 2 to Simple Layer          -       IdentConn
//          15 Simple Layer to AnaRetina                    - (A^T) TransposeConn
// Note: Because of the update rule for A, it is more natural to define
//       A^T as a connection from CataSimple Pooling 1 to Retina.  However,
//       in this training run there is no connection.  If doing top-down
//       reconstruction, there will be and it would make sense to use
//       A^T there and define Simple Layer to AnaRetina with a CloneKernelConn
//       of that connection.
//          16 Simple Layer to CataSimple Pooling 1         +       IdentConn
//          17 Simple Layer to CataSimple Pooling 2         +       IdentConn
//          18 Simple Layer to CataSimple Layer             +       IdentConn
//          19 Simple Layer to AnaSimple Layer              +       IdentConn
//          20 Simple Layer to AnaSimple Pooling 1          +       IdentConn
//          21 Simple Layer to AnaSimple Pooling 2          +       IdentConn
//          22 Simple Layer to CataComplex Layer            - (B)   CloneKernelConn
//          23 AnaSimple Layer to AnaSimple Pooling 1       -       IdentConn
//          24 AnaSimple Layer to AnaSimple Pooling 2       -       IdentConn
//          25 CataComplex Pooling 1 to Simple Layer        + (B^T) TransposeConn
//          26 CataComplex Pooling 1 to Complex Layer       -       IdentConn
//          27 CataComplex Pooling 2 to Complex Layer       -       IdentConn
//          28 CataComplex Layer to CataComplex Pooling 1   -       IdentConn
//          29 CataComplex Layer to CataComplex Pooling 2   -       IdentConn
//          30 Complex Layer to AnaSimple Layer             - (B^T) CloneKernelConn
//          31 Complex Layer to CataComplex Pooling 1       +       IdentConn
//          32 Complex Layer to CataComplex Pooling 2       +       IdentConn
//          33 Complex Layer to CataComplex Layer           +       IdentConn
// The last eight connections are to the energy layers
//          34 Retina to Energy AnaRetina                   +       IdentConn
//          35 AnaRetina to Energy AnaRetina                -       IdentConn
//          36 Simple Layer to Energy CataSimple Layer      +       IdentConn
//          37 CataSimple Layer to Energy CataSimple Layer  -       IdentConn
//          38 Simple Layer to Energy AnaSimple Layer       +       IdentConn
//          39 AnaSimple Layer to Energy AnaSimple Layer    -       IdentConn
//          40 Complex Layer to Energy CataComplex Layer    +       IdentConn
//          41 CataCompex Layer to Energy CataComplex Layer -       IdentConn

IdentConn "Slideshow to Retina" = {
    preLayerName = "Slideshow";
    postLayerName = "Retina";
    channelCode = 0;    
    writeStep = -1;
    delay = 0;          
};

PoolingGenConn "Retina Pooling 1 to Simple Layer" = {
    preLayerName = "Retina Pooling 1";
    postLayerName = "Simple Layer";
    secondaryPreLayerName = "Retina";
    secondaryPostLayerName = "CataSimple Pooling 1";
    channelCode = 0;       
    nxp = 1;           
    nyp = 1;           
    nfp = 16;
    numAxonalArbors = 1;
    writeStep = 1.0;   
    writeCompressedWeights = false;
    delay = 0;             
    // weightInitType = "UniformRandomWeight";   
    // wMinInit = 0;      
    // wMaxInit = 1;   
    weightInitType = "FileWeight";
    initWeightsFile = "input/generativesymmetry/correctA.pvp";
    normalize = 1;         
    plasticityFlag = true;
    symmetrizeWeights = 0;
    weightUpdatePeriod = 100;
    relaxation = 1E-1;
    nonnegConstraintFlag = 1;
    normalizeMethod = 3;                        
    normalizeConstant = 0.5;
};

IdentConn "Retina to AnaRetina" = {
    preLayerName = "Retina";
    postLayerName = "AnaRetina";
    channelCode = 0;    
    writeStep = -1;    
    delay = 0;          
};

IdentConn "Retina to Retina Pooling 1" = {
    preLayerName = "Retina";
    postLayerName = "Retina Pooling 1";
    channelCode = 0;    
    writeStep = -1;
    delay = 0;          
};

IdentConn "Retina to Retina Pooling 2" = {
    preLayerName = "Retina";
    postLayerName = "Retina Pooling 2";
    channelCode = 0;    
    writeStep = -1;
    delay = 0;          
};

CloneKernelConn "Retina to CataSimple Layer" = {
    preLayerName = "Retina";
    postLayerName = "CataSimple Layer";    
    originalConnName = "Retina Pooling 1 to Simple Layer";
    channelCode = 1;   
    writeStep = -1;   
    writeCompressedWeights = false;
    delay = 0;         
};

IdentConn "AnaRetina to Retina Pooling 1" = {
    preLayerName = "AnaRetina";
    postLayerName = "Retina Pooling 1";
    channelCode = 1;    
    writeStep = -1;    
    delay = 0;          
};

IdentConn "AnaRetina to Retina Pooling 2" = {
    preLayerName = "AnaRetina";
    postLayerName = "Retina Pooling 2";
    channelCode = 1;    
    writeStep = -1;    
    delay = 0;          
};

IdentConn "CataSimple Pooling 1 to Simple Layer" = {
    preLayerName = "CataSimple Pooling 1";
    postLayerName = "Simple Layer";
    channelCode = 1;    
    writeStep = -1;    
    delay = 0;          
};

IdentConn "CataSimple Pooling 2 to Simple Layer" = {
    preLayerName = "CataSimple Pooling 2";
    postLayerName = "Simple Layer";
    channelCode = 1;    
    writeStep = -1;    
    delay = 0;          
};

IdentConn "CataSimple Layer to CataSimple Pooling 1" = {
    preLayerName = "CataSimple Layer";
    postLayerName = "CataSimple Pooling 1";
    channelCode = 1;    
    writeStep = -1;    
    delay = 0;          
};

IdentConn "CataSimple Layer to CataSimple Pooling 2" = {
    preLayerName = "CataSimple Layer";
    postLayerName = "CataSimple Pooling 2";
    channelCode = 1;    
    writeStep = -1;    
    delay = 0;          
};

IdentConn "AnaSimple Pooling 1 to Simple Layer" = {
    preLayerName = "AnaSimple Pooling 1";
    postLayerName = "Simple Layer";
    channelCode = 1;    
    writeStep = -1;    
    delay = 0;          
};

PoolingGenConn "AnaSimple Pooling 1 to Complex Layer" = {
    preLayerName = "AnaSimple Pooling 1";
    postLayerName = "Complex Layer";
    secondaryPreLayerName = "Simple Layer";
    secondaryPostLayerName = "CataComplex Pooling 1";
    channelCode = 1;       
    nxp = 1;           
    nyp = 1;           
    nfp = 2;
    numAxonalArbors = 1;
    writeStep = 1.0;   
    writeCompressedWeights = false;
    delay = 0;             
    // weightInitType = "UniformRandomWeight";   
    // wMinInit = 0;      
    // wMaxInit = 1;      
    weightInitType = "FileWeight";
    initWeightsFile = "input/generativesymmetry/correctB.pvp";
    normalize = 1;         
    plasticityFlag = true;
    symmetrizeWeights = 0;
    weightUpdatePeriod = 100;
    relaxation = 1E-1;
    nonnegConstraintFlag = 1;
    normalizeMethod = 3;                        
    normalizeConstant = 1;
};

IdentConn "AnaSimple Pooling 2 to Simple Layer" = {
    preLayerName = "AnaSimple Pooling 2";
    postLayerName = "Simple Layer";
    channelCode = 1;    
    writeStep = -1;    
    delay = 0;          
};

TransposeConn "Simple Layer to AnaRetina" = {
    preLayerName = "Simple Layer";
    postLayerName = "AnaRetina";    
    originalConnName = "Retina to CataSimple Layer";
    channelCode = 1;        
    writeStep = -1;    
    writeCompressedWeights = true;
    delay = 0;          
};

IdentConn "Simple Layer to CataSimple Pooling 1" = {
    preLayerName = "Simple Layer";
    postLayerName = "CataSimple Pooling 1";
    channelCode = 0;    
    writeStep = -1;
    delay = 0;          
};

IdentConn "Simple Layer to CataSimple Pooling 2" = {
    preLayerName = "Simple Layer";
    postLayerName = "CataSimple Pooling 2";
    channelCode = 0;    
    writeStep = -1;
    delay = 0;          
};

IdentConn "Simple Layer to CataSimple Layer" = {
    preLayerName = "Simple Layer";
    postLayerName = "CataSimple Layer";
    channelCode = 0;    
    writeStep = -1;
    delay = 0;          
};

IdentConn "Simple Layer to AnaSimple Layer" = {
    preLayerName = "Simple Layer";
    postLayerName = "AnaSimple Layer";
    channelCode = 0;    
    writeStep = -1;
    delay = 0;          
};

IdentConn "Simple Layer to AnaSimple Pooling 1" = {
    preLayerName = "Simple Layer";
    postLayerName = "AnaSimple Pooling 1";
    channelCode = 0;
    writeStep = -1;
    delay = 0;
};

IdentConn "Simple Layer to AnaSimple Pooling 2" = {
    preLayerName = "Simple Layer";
    postLayerName = "AnaSimple Pooling 2";
    channelCode = 0;
    writeStep = -1;
    delay = 0;
};

CloneKernelConn "Simple Layer to CataComplex Layer" = {
    preLayerName = "Simple Layer";
    postLayerName = "CataComplex Layer";    
    originalConnName = "AnaSimple Pooling 1 to Complex Layer";
    channelCode = 1;   
    writeStep = -1;   
    writeCompressedWeights = false;
    delay = 0;         
};

IdentConn "AnaSimple Layer to AnaSimple Pooling 1" = {
    preLayerName = "AnaSimple Layer";
    postLayerName = "AnaSimple Pooling 1";
    channelCode = 1;
    writeStep = -1;
    delay = 0;
};

IdentConn "AnaSimple Layer to AnaSimple Pooling 2" = {
    preLayerName = "AnaSimple Layer";
    postLayerName = "AnaSimple Pooling 2";
    channelCode = 1;
    writeStep = -1;
    delay = 0;
};

TransposeConn "CataComplex Pooling 1 to Simple Layer" = {
    preLayerName = "CataComplex Pooling 1";
    postLayerName = "Simple Layer";    
    originalConnName = "AnaSimple Pooling 1 to Complex Layer";
    channelCode = 0;        
    writeStep = -1;    
    writeCompressedWeights = false;
    delay = 0;          
};

IdentConn "CataComplex Pooling 1 to Complex Layer" = {
    preLayerName = "CataComplex Pooling 1";
    postLayerName = "Complex Layer";
    channelCode = 1;
    writeStep = -1;
    delay = 0;
};

IdentConn "CataComplex Pooling 2 to Complex Layer" = {
    preLayerName = "CataComplex Pooling 2";
    postLayerName = "Complex Layer";
    channelCode = 1;
    writeStep = -1;
    delay = 0;
};

IdentConn "CataComplex Layer to CataComplex Pooling 1" = {
    preLayerName = "CataComplex Layer";
    postLayerName = "CataComplex Pooling 1";
    channelCode = 1;
    writeStep = -1;
    delay = 0;
};

IdentConn "CataComplex Layer to CataComplex Pooling 2" = {
    preLayerName = "CataComplex Layer";
    postLayerName = "CataComplex Pooling 2";
    channelCode = 1;
    writeStep = -1;
    delay = 0;
};

CloneKernelConn "Complex Layer to AnaSimple Layer" = {
    preLayerName = "Complex Layer";
    postLayerName = "AnaSimple Layer";    
    originalConnName = "CataComplex Pooling 1 to Simple Layer";
    channelCode = 1;   
    writeStep = -1;   
    writeCompressedWeights = false;
    delay = 0;         
};

IdentConn "Complex Layer to CataComplex Pooling 1" = {
    preLayerName = "Complex Layer";
    postLayerName = "CataComplex Pooling 1";
    channelCode = 0;
    writeStep = -1;
    delay = 0;
};

IdentConn "Complex Layer to CataComplex Pooling 2" = {
    preLayerName = "Complex Layer";
    postLayerName = "CataComplex Pooling 2";
    channelCode = 0;
    writeStep = -1;
    delay = 0;
};

IdentConn "Complex Layer to CataComplex Layer" = {
    preLayerName = "Complex Layer";
    postLayerName = "CataComplex Layer";
    channelCode = 0;
    writeStep = -1;
    delay = 0;
};

IdentConn "Retina to Energy AnaRetina" = {
    preLayerName = "Retina";
    postLayerName = "Energy AnaRetina";
    channelCode = 0;
    writeStep = -1;
    delay = 0;
};

IdentConn "AnaRetina to Energy AnaRetina" = {
    preLayerName = "AnaRetina";
    postLayerName = "Energy AnaRetina";
    channelCode = 1;
    writeStep = -1;
    delay = 0;
};

IdentConn "Simple Layer to Energy CataSimple Layer" = {
    preLayerName = "Simple Layer";
    postLayerName = "Energy CataSimple Layer";
    channelCode = 0;
    writeStep = -1;
    delay = 0;
};

IdentConn "CataSimple Layer to Energy CataSimple Layer" = {
    preLayerName = "CataSimple Layer";
    postLayerName = "Energy CataSimple Layer";
    channelCode = 1;
    writeStep = -1;
    delay = 0;
};

IdentConn "Simple Layer to Energy AnaSimple Layer" = {
    preLayerName = "Simple Layer";
    postLayerName = "Energy AnaSimple Layer";
    channelCode = 0;
    writeStep = -1;
    delay = 0;
};

IdentConn "AnaSimple Layer to Energy AnaSimple Layer" = {
    preLayerName = "AnaSimple Layer";
    postLayerName = "Energy AnaSimple Layer";
    channelCode = 1;
    writeStep = -1;
    delay = 0;
};

IdentConn "Complex Layer to Energy CataComplex Layer" = {
    preLayerName = "Complex Layer";
    postLayerName = "Energy CataComplex Layer";
    channelCode = 0;
    writeStep = -1;
    delay = 0;
};

IdentConn "CataComplex Layer to Energy CataComplex Layer" = {
    preLayerName = "CataComplex Layer";
    postLayerName = "Energy CataComplex Layer";
    channelCode = 1;
    writeStep = -1;
    delay = 0;
};

GenColProbe "Total Energy Probe" = {
    probeOutputFile = "TotalEnergy.txt";
};

L2NormProbe "AnaRetina Energy" = {
    targetLayer = "Energy AnaRetina";
    parentGenColProbe = "Total Energy Probe";
    coeff = 1;
    probeOutputFile = "AnaRetina_Energy.txt";
};

L2NormProbe "CataSimple Layer Energy" = {
    targetLayer = "Energy CataSimple Layer";
    parentGenColProbe = "Total Energy Probe";
    coeff = 1;
    probeOutputFile = "CataSimple_Layer_Energy.txt";
};

L2NormProbe "AnaSimple Layer Energy" = {
    targetLayer = "Energy AnaSimple Layer";
    parentGenColProbe = "Total Energy Probe";
    coeff = 1;
    probeOutputFile = "AnaLayer_Layer_Energy.txt";
};

L2NormProbe "CataComplex Layer Energy" = {
    targetLayer = "Energy CataComplex Layer";
    parentGenColProbe = "Total Energy Probe";
    coeff = 1;
    probeOutputFile = "CataComplex_Layer_Energy.txt";
};

LogLatWTAProbe "Simple Layer Lateral Competition Penalty" = {
    targetLayer = "Simple Layer";
    parentGenColProbe = "Total Energy Probe";
    coeff = 0.25;
    probeOutputFile = "Simple_Layer_LatCompPenalty.txt";
};

LogLatWTAProbe "Complex Layer Lateral Competition Penalty" = {
    targetLayer = "Complex Layer";
    parentGenColProbe = "Total Energy Probe";
    coeff = 0.25;
    probeOutputFile = "Complex_Layer_LatCompPenalty.txt";
};
