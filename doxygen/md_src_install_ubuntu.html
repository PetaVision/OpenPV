<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>PetaVision: Ubuntu Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="PetaVision"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PetaVision
   &#160;<span id="projectnumber">Alpha</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_src_install_ubuntu.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Ubuntu Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a tutorial on getting PetaVision and running on Ubuntu-14.04 with GPU support, assuming you have a clean installation of Ubuntu.</p>
<h2>Requirements </h2>
<ul>
<li>An NVIDIA card with compute capabilities 3.0 or above. Check at <a href="https://developer.nvidia.com/cuda-gpus">https://developer.nvidia.com/cuda-gpus</a> to see if your video card is supported</li>
<li>Ubuntu 14.04</li>
<li>sudo access</li>
</ul>
<h2>Initialization </h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo apt-get update</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;sudo apt-get upgrade</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;sudo apt-get install cmake cmake-curses-gui gcc g++ gdb subversion</div>
</div><!-- fragment --><h2>OpenMPI </h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo apt-get install libopenmpi-dev openmpi-bin</div>
</div><!-- fragment --><h2>GDAL </h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo apt-get install libgdal-dev gdal-bin</div>
</div><!-- fragment --><h2>CUDA and NVIDIA Driver </h2>
<p>Go to <a href="http://www.nvidia.com/Download/index.aspx?lang=en-us">http://www.nvidia.com/Download/index.aspx?lang=en-us</a> and find your video card. Download the linux RUN file. Note the location. Go to <a href="https://developer.nvidia.com/cuda-downloads">https://developer.nvidia.com/cuda-downloads</a>. Click the RUN file for your archetecture. Make sure if you have a 64 bit version of ubuntu that you download the 64 bit version cuda. Note the location.</p>
<p>NVIDIA drivers may not be installed unless X is not running. Here's how to install the drivers.</p>
<p>Reboot Ubuntu. At the GRUB menu, select Acvanced options for Ubuntu. Boot Ubuntu into recovery mode. Select root to get into root command line. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;mount -o remount,rw #This remounts your drive into read/write mode</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;cd path/to/cuda.run </div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;chmod u+x path/to/cuda/driver.run</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;./path/to/cuda/driver.ruh</div>
</div><!-- fragment --><p>Follow the onscreen instructions. When it asks if you want to install NVIDIA driver, select yes. This version is outdated, but cuda needs this driver to work. Make sure to install CUDA 6.5 toolkit into the default location. Add a symbolic link to <code>/usr/local/cuda</code> when asked.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd path/to/driver.run</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;chmod u+x path/to/driver.run</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;./path/to/driver.run</div>
</div><!-- fragment --><p>Follow the instructions on the screen. When asked to uninstall the driver installed by cuda, select yes. When asked to update your Xorg, select yes. This will use this driver as your GUI display. Run <code>nvidia-smi</code> and make sure you see your video card. Reboot.</p>
<h2>CUDNN </h2>
<p>Go to <a href="https://developer.nvidia.com/cuDNN">https://developer.nvidia.com/cuDNN</a> and click Download at the bottom. Register with NVIDIA developers if need be, and wait for confirmation. Download the Linux version of CUDNN (Optional: if you have access to NMC's compuneuro, grab it from here: <code>/nh/compneuro/Data/cuDNN</code>)</p>
<h2>Finalization </h2>
<p>Do one final update/upgrade for everything </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo apt-get update</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;sudo apt-get upgrade</div>
</div><!-- fragment --><h2>Checking Out and Installing PetaVision </h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ${HOME}</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;mkdir workspace</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;cd workspace</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;svn co https://&lt;useranme&gt;@svn.code.sf.net/p/petavision/code/trunk PetaVision</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;svn co https://&lt;username&gt;@svn.code.sf.net/p/petavision/code/PVSystemTests PVSystemTests</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;#You can download your sandbox here</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;cp PetaVision/docs/cmake/CMakeLists.txt .</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;#Here, you would add your sandbox to the end of CMakeLists</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;ccmake .</div>
</div><!-- fragment --><p>CMake options: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;CMAKE_BUILD_TYPE = Release #Optimiztaion for CPU</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;CUDA_GPU = True #Depending on if you want to use GPUS</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;CUDA_RELEASE = True #Optimization for Cuda</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;CUDNN = True #If you&#39;re using CUDNN</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;CUDNN_PATH = /path/to/cudnn/folder #The path to the cuDNN folder you downloaded/copied</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;OPEN_MP_THREADS = True #If we use threads or not</div>
</div><!-- fragment --><p>If some of these options do not show up on ccmake, fill the ones you can, press c to configure, and look again for variables Press G to generate when avaliable.</p>
<p>To Test:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd ~/workspace/PVSystemTest/GPUSystemTest</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make -j 8</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;Release/GPUSystemTest -p input/postTest.params -t</div>
</div><!-- fragment --><h2>Optional: Python </h2>
<p>Ubuntu comes with python 2.7. We suggest installing anaconda python for analysis tools.</p><ul>
<li>Go to <a href="https://store.continuum.io/cshop/anaconda/">https://store.continuum.io/cshop/anaconda/</a></li>
<li>Enter your email</li>
<li>Click I WANT PYTHON 3.4</li>
<li>Click the linux penguin</li>
<li>Click the download link and save it</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;chmod u+x path/to/python.sh</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;./path/to/python.sh</div>
</div><!-- fragment --><p>Follow the directions. Make sure to specify yes when it asks you if you want anaconda in your path.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;source ~/.bashrc</div>
</div><!-- fragment --><p>To ensure it's working, type python and make sure the text splash says <code>Python 3.4.1 |Anaconda 2.1</code></p>
<h2>Optional: Octave </h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo apt-get install octave liboctave-dev</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;octave</div>
</div><!-- fragment --><p>In octave: </p><div class="fragment"><div class="line">pkg install -forge general</div>
<div class="line">pkg install -forge control</div>
<div class="line">pkg install -forge signal</div>
<div class="line">pkg install -forge image</div>
<div class="line">pkg install -forge parallel</div>
<div class="line">exit</div>
</div><!-- fragment --><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;echo pkg load all &gt;&gt; ~/.octaverc</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
