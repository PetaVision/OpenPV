//
// params.geislerconn
//  - input parameters for geisler.cpp for learning geisler kernels
//

FileDefinition "ImageFileList" =  "./input/target/0001/test/test_filenames.txt";
FileDefinition "OutputDir" =      "./output/target/0001/test/";
FileDefinition "TargetWgts" =     "./output/target/0001/train/w3_last.pvp";
FileDefinition "DistractorWgts" = "./output/distractor/0001/train/w3_last.pvp";

HyPerCol "column" = {
   nx = 256;   // 128; // 
   ny = 256;   // 128; // 
   dt = 1.0;
   training_flag = 0;
};

//
// Two layers, "Retina"+"Image", "L1", 
//

HyPerLayer "Movie" = {
   // unnecessary ?
  marginWidth = 0; 
  nf = 1;                      // use 3 for RGB
};

HyPerLayer "Retina" = {
   nxScale = 1;
   nyScale = 1;
   marginWidth = 0;
   mirrorBCflag = 0;  

   beginStim = 1;
   endStim   = 40000;

   burstFreq = 1;      // Hz
   burstDuration = 40000;  // ms
   
   poissonEdgeProb = 1.0;
   poissonBlankProb = 0.0;
   
   invert = 0;

   spikingFlag = 0;
   writeNonspikingActivity = 1;

};

HyPerLayer "L1" = {
   nxScale = 1; //0.5
   nyScale = 1; //0.5
   nf = 8; //128;
   
   marginWidth = 32;
   mirrorBCflag = 1;  
   restart = 0;
   
   Vrest = 0.0;
   noiseFreqE = 0.0;
   noiseFreqI = 0.0;
   noiseFreqIB = 0.0;
   noiseAmpE = 0.0;
   noiseAmpI = 0.0;  
   noiseAmpIB = 0.0; 
    
   spikingFlag = 0;
   writeNonspikingActivity = 1;
};


HyPerLayer "L1 Geisler" = {
   nxScale = 1; 
   nyScale = 1; 
   nf = 8;
   
   marginWidth = 32;//48;//
   mirrorBCflag = 1;  
   restart = 0;
   
   Vrest = 0.0;
   noiseFreqE = 0.0;
   noiseFreqI = 0.0;
   noiseFreqIB = 0.0;
   noiseAmpE = 0.0;
   noiseAmpI = 0.0;  
   noiseAmpIB = 0.0; 
    
   spikingFlag = 0;
   writeNonspikingActivity = 1;
};

HyPerLayer "L2 Geisler" = {
   nxScale = 1; 
   nyScale = 1; 
   nf = 8;
   
   marginWidth = 32;//48;//
   mirrorBCflag = 1;  
   restart = 0;
   
   Vrest = 0.0;
   noiseFreqE = 0.0;
   noiseFreqI = 0.0;
   noiseFreqIB = 0.0;
   noiseAmpE = 0.0;
   noiseAmpI = 0.0;  
   noiseAmpIB = 0.0; 
    
   spikingFlag = 0;
   writeNonspikingActivity = 1;
};

HyPerLayer "L3 Geisler" = {
   nxScale = 1; 
   nyScale = 1; 
   nf = 8;
   
   marginWidth = 32;//48;//
   mirrorBCflag = 1;  
   restart = 0;
   
   Vrest = 0.0;
   noiseFreqE = 0.0;
   noiseFreqI = 0.0;
   noiseFreqIB = 0.0;
   noiseAmpE = 0.0;
   noiseAmpI = 0.0;  
   noiseAmpIB = 0.0; 
    
   spikingFlag = 0;
   writeNonspikingActivity = 1;
};

HyPerLayer "L4 Geisler" = {
   nxScale = 1; 
   nyScale = 1; 
   nf = 8;
   
   marginWidth = 32;//48;//
   mirrorBCflag = 1;  
   restart = 0;
   
   Vrest = 0.0;
   noiseFreqE = 0.0;
   noiseFreqI = 0.0;
   noiseFreqIB = 0.0;
   noiseAmpE = 0.0;
   noiseAmpI = 0.0;  
   noiseAmpIB = 0.0; 
    
   spikingFlag = 0;
   writeNonspikingActivity = 1;
};

///////
//  connections: 
//    "Retina to L1"
//    "Retina to L1 Inh"
//    "L1 to L1 Geisler"
//    "L1 to L1 Geisler Target"
//    "L1 to L1 Geisler Disctractor"


HyPerConn "Movie to Retina" = {
   nxp = 1; 
   nyp = 1; 
   
   stdpFlag   = 0;
   randomFlag = 0; 
   initFromLastFlag = 0;  // 1;  // restart

   aspect = 1;
   sigma = 1;
   rMax  = 1;
   strength = 0.003921569;   // 1.0/255
   
   delay = 0.0;
};


// Retina connections

HyPerConn "Retina to L1" = {
   nxp = 7; 
   nyp = 7; 
   
   stdpFlag   = 0;
   randomFlag = 0; 
   initFromLastFlag = 0;  // 1;  // restart

   aspect = 7;
   sigma = 7; //5; //
   rMax  = 7;
   rotate = 1;
   
   strength = 25.0;  //200; //
   
   delay = 0.0;
};

HyPerConn "Retina to L1 Inh" = {
   nxp = 7; 
   nyp = 7; 
   
   stdpFlag   = 0;
   randomFlag = 0; 
   initFromLastFlag = 0;  // 1;  // restart

   aspect = 7; //1; //
   sigma = 7; //5; //
   rMax  = 7;
   rotate = 1;
   numFlanks = 2; //1; //
   flankShift = 3; //0; //
   
   strength = 50.0; // 400; //
   
   delay = 0.0;
};


// Training connections 

HyPerConn "L1 to L1" = {
   nxp = 65; 
   nyp = 65;

   stdpFlag   = 0;
   randomFlag = 0;  
   initFromLastFlag = 0;  // 1;  // restart

   strength = 100.0;
   normalize = 1.0;
   normalize_zero_offset = 0.0;
   normalize_max = 0.0;
   
   delay = 0.0;   
};




// Testing connections


HyPerConn "L1 to L1 Geisler" = {
   nxp = 1; 
   nyp = 1; 
   
   stdpFlag   = 0;
   randomFlag = 0; 
   initFromLastFlag = 0;  // 1;  // restart

   aspect = 1;
   sigma = 1;
   rMax  = 1;
   sigma_cocirc = 1000001.0; // PI / 12.0;
   deltaThetaMax = 0.0625; //PI/48;
   
   strength = 1.0;  
   
   delay = 0.0;
};

HyPerConn "L1 to L1 Geisler Target" = {
   nxp = 65; 
   nyp = 65; 

   stdpFlag   = 0;
   randomFlag = 0;  
   initFromLastFlag = 0;  // 1;  // restart

   strength =  325.0; 
   normalize = 1.0;
   normalize_zero_offset = 0.0;
   normalize_max = 0.0;
   
   delay = 0.0;   
};

HyPerConn "L1 to L1 Geisler Distractor" = {
   nxp = 65; 
   nyp = 65; 

   stdpFlag   = 0;
   randomFlag = 0;  
   initFromLastFlag = 0;  // 1;  // restart

   strength = -325.0;  
   normalize = 1.0;
   normalize_zero_offset = 0.0;
   normalize_max = 0.0;
   
   delay = 0.0;   
};



HyPerConn "L1 Geisler to L2 Geisler" = {
   nxp = 1; 
   nyp = 1; 
   
   stdpFlag   = 0;
   randomFlag = 0; 
   initFromLastFlag = 0;  // 1;  // restart

   aspect = 1;
   sigma = 1;
   rMax  = 1;
   sigma_cocirc = 1000001.0; // PI / 12.0;
   deltaThetaMax = 0.0625; //PI/48;
   
   strength = 1.0;  
   
   delay = 0.0;
};

HyPerConn "L1 Geisler to L2 Geisler Target" = {
   nxp = 65;//97;//
   nyp = 65;//97;//

   stdpFlag   = 0;
   randomFlag = 0;  
   initFromLastFlag = 0;  // 1;  // restart

   strength = 325.0;   
   normalize = 1.0;
   normalize_zero_offset = 0.0;
   normalize_max = 0.0;
   
   delay = 0.0;   
};

HyPerConn "L1 Geisler to L2 Geisler Distractor" = {
   nxp = 65;//97;// 
   nyp = 65;//97;// 

   stdpFlag   = 0;
   randomFlag = 0;  
   initFromLastFlag = 0;  // 1;  // restart

   strength = -325.0; 
   normalize = 1.0;
   normalize_zero_offset = 0.0;
   normalize_max = 0.0;
   
   delay = 0.0;   
};





HyPerConn "L2 Geisler to L3 Geisler" = {
   nxp = 1; 
   nyp = 1; 
   
   stdpFlag   = 0;
   randomFlag = 0; 
   initFromLastFlag = 0;  // 1;  // restart

   aspect = 1;
   sigma = 1;
   rMax  = 1;
   sigma_cocirc = 1000001.0; // PI / 12.0;
   deltaThetaMax = 0.0625; //PI/48;
   
   strength = 1.0;  
   
   delay = 0.0;
};

HyPerConn "L2 Geisler to L3 Geisler Target" = {
   nxp = 65;//97;//
   nyp = 65;//97;//

   stdpFlag   = 0;
   randomFlag = 0;  
   initFromLastFlag = 0;  // 1;  // restart

   strength = 325.0;  
   normalize = 1.0;
   normalize_zero_offset = 0.0;
   normalize_max = 0.0;
   
   delay = 0.0;   
};

HyPerConn "L2 Geisler to L3 Geisler Distractor" = {
   nxp = 65;//97;//
   nyp = 65;//97;// 

   stdpFlag   = 0;
   randomFlag = 0;  
   initFromLastFlag = 0;  // 1;  // restart

   strength = -325.0; 
   normalize = 1.0;
   normalize_zero_offset = 0.0;
   normalize_max = 0.0;
   
   delay = 0.0;   
};





HyPerConn "L3 Geisler to L4 Geisler" = {
   nxp = 1; 
   nyp = 1; 
   
   stdpFlag   = 0;
   randomFlag = 0; 
   initFromLastFlag = 0;  // 1;  // restart

   aspect = 1;
   sigma = 1;
   rMax  = 1;
   sigma_cocirc = 1000001.0; // PI / 12.0;
   deltaThetaMax = 0.0625; //PI/48;
   
   strength = 1.0;  
   
   delay = 0.0;
};

HyPerConn "L3 Geisler to L4 Geisler Target" = {
   nxp = 65;//97;// 
   nyp = 65;//97;// 

   stdpFlag   = 0;
   randomFlag = 0;  
   initFromLastFlag = 0;  // 1;  // restart

   strength = 325.0;  
   normalize = 1.0;
   normalize_zero_offset = 0.0;
   normalize_max = 0.0;
   
   delay = 0.0;   
};

HyPerConn "L3 Geisler to L4 Geisler Distractor" = {
   nxp = 65;//97;//
   nyp = 65;//97;// 

   stdpFlag   = 0;
   randomFlag = 0;  
   initFromLastFlag = 0;  // 1;  // restart

   strength = -325.0; 
   normalize = 1.0;
   normalize_zero_offset = 0.0;
   normalize_max = 0.0;
   
   delay = 0.0;   
};

