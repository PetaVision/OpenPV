//
// test_kernel.params
//
// created by garkenyon: August 4, 2011
//

//  - input parameters for test_kernel.cpp for system level testing of kernels
//

debugParsing = false;

HyPerCol "column" = {
   nx = 32;   
   ny = 32;
   dt = 1.0;
   randomSeed = 926268668;  // if not set here,  clock time is used to generate seed
   startTime = 0.0;
   stopTime = 4.0;  // num images plus (num layers + 1) * delay
   progressInterval = 5.0;
   writeProgressToErr = false;
   outputPath = "output/";
   filenamesContainLayerNames = 2;
   filenamesContainConnectionNames = 0;
   checkpointRead = false;
   checkpointWrite = false;
   suppressLastOutput = false;
};

//
// layers
//

Retina "Retina" = {
    restart = 0;
    nxScale = 1;
    nyScale = 1;
    nf = 1;
    phase = 0;
    triggerFlag = false;
    writeStep = 1.0;
    initialWriteTime = 0.0;
    writeSparseActivity = false;
    mirrorBCflag = true;
    spikingFlag = false;

    foregroundRate = 1000;
    backgroundRate = 1000;
    burstFreq = 1;
    burstDuration = 1000;

    beginStim = 0;
    endStim = 1000;
};

ANNLayer "L0" = {
    restart = 0;
    nxScale = 1;
    nyScale = 1;
    nf = 1;
    phase = 1;
    triggerFlag = false;
    writeStep = 1.0;
    initialWriteTime = 0.0;
    mirrorBCflag = 1;
    writeSparseActivity = false;

    InitVType = "ConstantV";
    valueV = 0;

    VThresh = -infinity;
    VMax = infinity;
    VMin = -infinity;
    VShift = 0.0;
    VWidth = 0.0;
};

ANNLayer "Lx1" = {
    restart = 0;
    nxScale = 1;
    nyScale = 1;
    nf = 1;
    phase = 2;
    triggerFlag = false;
    writeStep = 1.0;
    initialWriteTime = 0.0;
    mirrorBCflag = 1;
    writeSparseActivity = false;

    InitVType = "ConstantV";
    valueV = 0;

    VThresh = -infinity;
    VMax = infinity;
    VMin = -infinity;
    VShift = 0.0;
    VWidth = 0.0;
};


//  connections: 

KernelConn "Retina to L0" = {
    preLayerName = "Retina";
    postLayerName = "L0";
    channelCode = 0;
    nxp = 1;
    nyp = 1;
    nfp = 1;
    numAxonalArbors = 1;
    writeStep = -1;
    writeCompressedCheckpoints = false;
    initFromLastFlag = 0;
    
    weightInitType = "UniformWeight";
    weightInit = 1;
      
    strength = 1.0; // 1.0 x post->num_neurons / pre->num_neurons
    normalizeMethod = "normalizeSum";
    normalizeArborsIndividually = 0;
    normalize_cutoff = 0.0;
    minSumTolerated = 0.0;
    normalizeFromPostPerspective = true;
    symmetrizeWeights = false;

    plasticityFlag = 0;
    shmget_flag = 1;

    delay = 0;

    pvpatchAccumulateType = "convolve";
    shrinkPatches = false;
    preActivityIsNotRate = false;
    selfFlag = false;
    updateGSynFromPostPerspective = false;
};

KernelConn "L0 to Lx1" = {
    preLayerName = "L0";
    postLayerName = "Lx1";
    channelCode = 0;
    nxp = 5;
    nyp = 5;
    nxpShrunken = 3;
    nypShrunken = 3;
    nfp = 1;
    numAxonalArbors = 1;
    writeStep = -1;
    writeCompressedCheckpoints = false;
    initFromLastFlag = 0;
    
    weightInitType = "UniformWeight";
    weightInit = 1;
      
    strength = 1.0; // 1.0 x post->num_neurons / pre->num_neurons
    normalizeMethod = "normalizeSum";
    normalizeArborsIndividually = 0;
    normalize_cutoff = 0.0;
    minSumTolerated = 0.0;
    normalizeFromPostPerspective = true;
    symmetrizeWeights = false;

    plasticityFlag = 0;
    shmget_flag = 1;

    delay = 0;

    pvpatchAccumulateType = "convolve";
    shrinkPatches = false;
    preActivityIsNotRate = false;
    selfFlag = false;
    updateGSynFromPostPerspective = false;
};


KernelTestProbe "Retina Stats File" = {
    targetLayer = "Retina";
    probeOutputFile = "Retina_Stats.txt";
    message = "Retina Stats File      ";
};
KernelTestProbe "L0 Stats File" = {
    targetLayer = "L0";
    probeOutputFile = "L0_Stats.txt";
    message = "L0 Stats File          ";
};
KernelTestProbe "Lx1 Stats File" = {
    targetLayer = "Lx1";
    probeOutputFile = "Lx1_Stats.txt";
    message = "Lx1 Stats File         ";
};

KernelTestProbe "Retina Stats Screen" = {
    targetLayer = "Retina";
    message = "Retina Stats Screen    ";
};
KernelTestProbe "L0 Stats Screen" = {
    targetLayer = "L0";
    message = "L0 Stats Screen        ";
};
KernelTestProbe "Lx1 Stats Screen" = {
    targetLayer = "Lx1";
    message = "Lx1 Stats Screen       ";
};
