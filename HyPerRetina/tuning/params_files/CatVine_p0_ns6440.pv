// 
// Parameter file for DARPA Heli data or graywhitesblackpots
//
// Complete model with cone, horizontal, SF, WF, PolyAxonal Amacrine, and Ganglion cells
//
// Formatted & modified by DMP/GTK/WAC
debugParsing = true;       // If error occurs, put this on true in param file and re-run to debug. 

HyPerCol "column" = {
   nx                           = 480; // 256; // 1920;//
   ny                           = 480; // 256; // 1080;//
   dt                           = 1.;           
   //randomSeed                   = 1020304050.0; // comment out this line to "randomize" initial random state
   checkpointRead               = true;        // init run
   checkpointReadDir = "/nh/compneuro/Data/vine/retina/output/Cat/Checkpoints";
   checkpointReadDirIndex 	= 138800;
   checkpointWrite              = true;         // 
   checkpointWriteDir           = "/nh/compneuro/Data/vine/retina/output/Cat/Checkpoints";
   checkpointWriteStepInterval  = 10000;
   filenamesContainLayerNames   = 2;

   numSteps                     = 644000;
   
   progressStep                 = 40; //1;
   writeProgressToErr           = 1;
   //deleteOlderCheckpoints       = 0.0;

   outputPath                   = "/nh/compneuro/Data/vine/retina/output/Cat";
   printParamsFilename          = "/nh/compneuro/Data/vine/retina/output/Cat/Cat.pv";
   suppressLastOutput           = false;
   filenamesContainConnectionNames = 0;
};

//---------------- Image Layer ---------------------//

disable = false;
Movie "Movie" = {
    
    imageListPath           = "/nh/compneuro/Data/vine/list/retina/filenames_CatVine.txt";
    restart                 = 0;
    nxScale                 = 1;
    nyScale                 = 1;
    nf                      = 1;

    mirrorBCflag            = 1;
    writeImages             = 0;
    displayPeriod           = 40; //100; //33;//
    jitterFlag              = 0;
    jitterType		    = 0;
    stepSize		    = 2; 
    jitterRefractoryPeriod  = 1;
    recurrenceProb 	    = .1;
    persistenceProb	    = .1;
    randomMovie             = 0;
    offsetX                 = 0;
    offsetY                 = 0;
    start_frame_index       = 0.0;
    skip_frame_index        = 0.0;
    echoFramePathnameFlag   = true;
    useImageBCflag          = false;
    inverseFlag             = false;
    normalizeLuminanceFlag  = false; //true;
    writeSparseActivity     = false;
    writeStep               = 1;
    writePosition	    = 1;
    initialWriteTime        = 0;
    autoResizeFlag          = 0;
    biasConstraintMethod    = 0;
    offsetConstraintMethod  = 0;
    readPvpFile             = 0;
    phase		    = 0;
};
     
disable = false;
ANNLayer "ImageBuffer" = {
    
    restart              = 0;
    nxScale              = 1;
    nyScale              = 1;
    nf                   = 1;
    mirrorBCflag         = 1;
    InitVType            = "ConstantV";
    valueV               = -55;
    VThresh              = -55;
    VMax                 = -35;
    VMin                 = -55;
    writeSparseActivity  = 0;
    writeStep            = -1.0;
    phase                = 1;
    VShift	         = 0;
};

disable = false;
ANNLayer "ConstantVrest" = {          //Offset cone input to -55mV for black spot (no input)
    
    restart              = 0;
    nxScale              = 1;
    nyScale              = 1;
    nf                   = 1;
    mirrorBCflag         = 1;
    InitVType            = "ConstantV";
    valueV               = -55;
    VThresh              = -55.;
    VMax                 = -55.;
    VMin                 = -55.;
    writeSparseActivity  = 0;
    writeStep            = -1.0;
    phase		 = 0;
    VShift		 = 0;
};



//-----------------  Cone Layer --------------------//


disable = false;
LIFGap "Cone" = {       // 1 //
    
    nxScale             = 1.;
    nyScale             = 1.;
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -10;
    Vrest               = -10;    // Cone adjusted as per discussion with Garrett // Cone
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 10.0;    // intrinsic leak membrane time constant (max)
    tauE                = 2.0;     // how long glutamine stays bound
    tauI                = 5.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = 100000.0;// firing threshold disabled                           <=============== disabled
    tauVth              = 10.0;    // relative refractory period
    deltaVth            = 0.0;     // jump of threshold when firing                          <=============== disabled
    noiseAmpE           = 0.5;     // 1 means conductance is equal to lead conductance               <======== no noise  
    noiseAmpI           = 0.5;     // "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0.;    // no noise here 
    noiseFreqE          =   0.;    // spontaneous transmitter release/channel openings
    noiseFreqI          =   0.;    // correlation to time step size !!!
    noiseFreqIB         =   0.;    // should be scaled by the time constant - look at LIF model
    writeSparseActivity = 0;       // specified sparse output
    writeStep           = -1.0;
    phase		= 2;
};

disable = false;
SigmoidLayer "ConeSigmoid" = {  // 2 introduced to have a more symmetric connection to the Horizontal than to the Bipolar cells
    
    nxScale             = 1.;
    nyScale             = 1.;
    nf                  = 1;
    originalLayerName   = "Cone";
    InitVType           = "ConstantV";
    valueV              = -45; 
    Vrest               = -55; 
    VthRest             = -35;                     
    mirrorBCflag        = 1.0; 
    InverseFlag         = 0.0;
    restart             = 0.0;      // from graylast
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.10;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 3;
};

disable = false;
SigmoidLayer "ConeSigmoidON" = {  // 2

    nxScale             = 1.;
    nyScale             = 1.;
    nf                  = 1;
    originalLayerName   = "Cone";
    InitVType           = "ConstantV";
    valueV              = -45;
    Vrest               = -55;  
    VthRest             = -35; // was -40. before moving the threshold in the middle                  
    mirrorBCflag        = 1.0; 
    InverseFlag         = 0.0;
    restart             = 0.0;      // from graylast
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.10;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase               = 3;
};


disable = false;
SigmoidLayer "ConeSigmoidOFF" = {   // 3

    nxScale             = 1.;
    nyScale             = 1.;
    nf                  = 1;
    originalLayerName   = "Cone";
    InitVType           = "ConstantV";
    valueV              = -45;  //-57.0;    // Vadj      = VgrayCone - (VthrestON+VrestON)/2
    Vrest               = -55;  //-57.0;    // Vrest     = VrestON + 2*Vadj
    VthRest             = -35;  //-48.0;      // Vthrest   = VthrestON + 2*Vadj
    mirrorBCflag        = 1.0;        //   
    InverseFlag         = 1.0;        //  
    restart             = 0.0;        // from graylast
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.1;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 3;
};


//---------------- Horizontal Cell Layer --------------------//

disable = false;
LIFGap "Horizontal" = {         //6

    nxScale             = 0.25;    // 5/18 discussion with Garrett
    nyScale             = 0.25;    // there are fewer horizontal 
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -65; //-55.0;
    Vrest               = -65; //-55.0;    // adjusted for gap of 0.025// Horizontal	
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 10.0;    // intrinsic leak membrane time constant (max)
    tauE                = 1.0;     // how long glutamine stays bound
    tauI                = 5.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = 100000.0;// firing threshold disabled                           <=============== disabled
    tauVth              = 10.0;    // relative refractory period
    deltaVth            = 5.0;     // jump of threshold when firing
    noiseAmpE           = 0.5;     // 1 means conductance is equal to lead conductance               <======== no noise  
    noiseAmpI           = 0.5;     // "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0;     // no noise here 
    noiseFreqE          =  0.;     // spontaneous transmitter release/channel openings
    noiseFreqI          =  0.;     // correlation to time step size !!!
    noiseFreqIB         =  0.;    // should be scaled by the time constant - look at LIF model
    writeSparseActivity = 0;       //  
    writeStep           = -1;
    phase		= 4;
};

disable = false;
GapLayer "HorizontalGap" = {                // 7

    originalLayerName   = "Horizontal";
    nxScale             = 0.25;         // 5/18 discussion with Garrett
    nyScale             = 0.25;         // there are fewer horizontal 
    nf                  = 1;
    mirrorBCflag        = 1.0;         // 
    restart             = 0.0;         // from graylast
    InitVType           = "ConstantV";
    ampSpikelet         = 150.0;
    valueV              = -45; //-55.0;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 5;
};

disable = false;
SigmoidLayer "HorizontalSigmoidON" = {        // 8

    originalLayerName   = "Horizontal";
    nxScale             = 0.25;         // 5/18 discussion with Garrett
    nyScale             = 0.25;         // three are fewer horizontal 
    InitVType           = "ConstantV";
    valueV              = -45; //-52.0; //-55.0;
    Vrest               = -55; //-52.0; //-58.233;     //
    VthRest             = -35; //-30.0; //-34.233;     //                        <=============== disabled
    mirrorBCflag        = 1.0;         // 
    restart             = 0.0;         // from graylast
    nf                  = 1;
    InverseFlag         = 0.0;
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.1;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 5;
};


disable = false;
SigmoidLayer "HorizontalSigmoidOFF" = {        // 8

    originalLayerName   = "Horizontal";
    nxScale             = 0.25;         // 5/18 discussion with Garrett
    nyScale             = 0.25;         // three are fewer horizontal 
    InitVType           = "ConstantV";
    valueV              = -45; //-52.0; //-55.0;
    Vrest               = -55; //-52.0; //-68.233; //-58.233;     //
    VthRest             = -35; //-30.0; //-44.233; //-34.233;     //                        <=============== disabled
    mirrorBCflag        = 1.0;         // 
    restart             = 0.0;         // from graylast
    nf                  = 1;
    InverseFlag         = 1.0;
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.1;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 5;
};



//-------------- Bipolar Layer ------------------------//

disable = false;
LIF "BipolarON" = {	            // 4

    nxScale             = 1.;
    nyScale             = 1.;
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -70.;
    Vrest               = -70.;    // BipolarON
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 10.0;    // intrinsic leak membrane time constant (max)
    tauE                = 1.0;     // how long glutamine stays bound
    tauI                = 5; //10.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = 100000.0;// firing threshold disabled                           <=============== disabled
    tauVth              = 10.0;    // relative refractory period
    deltaVth            = 5.0;     // jump of threshold when firing
    noiseAmpE           = 0.5;     // 1 means conductance is equal to lead conductance               <======== no noise  
    noiseAmpI           = 0.5;     // "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0;     // no noise here 
    noiseFreqE          = 0.;      // spontaneous transmitter release/channel openings
    noiseFreqI          = 0.;      // correlation to time step size !!!
    noiseFreqIB         = 0.;      // should be scaled by the time constant - look at LIF model
    writeSparseActivity = 0;       //  
    writeStep           = -1;
    phase		= 5;
};

disable = false;
SigmoidLayer "BipolarSigmoidON" = {     //5

    originalLayerName   = "BipolarON";
    nxScale             = 1.;
    nyScale             = 1.;
    InitVType           = "ConstantV";
    valueV              = -40; //-70.0;
    Vrest               = -40; //-70.0; //-66.0;         // BipolarSigmoidON
    VthRest             = -30; //-40.0; //-48; //-42.0;  
    mirrorBCflag        = 1.0;           // Margin boundaries are mirrored
    restart             = 0.0;           // from graylast
    nf                  = 1;
    InverseFlag         = 0.0;
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.1;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 6;
};

disable = false;
LIF "BipolarOFF" = {	           // 18

    nxScale             = 1.;
    nyScale             = 1.;
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -70.;
    Vrest               = -70.;    // BipolarOFF
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 10.0;    // intrinsic leak membrane time constant (max)
    tauE                = 1.0;     // how long glutamine stays bound
    tauI                = 5; //10.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = 100000.0;// firing threshold disabled                           <=============== disabled
    tauVth              = 10.0;    // relative refractory period
    deltaVth            = 5.0;     // jump of threshold when firing
    noiseAmpE           = 0.5;     // 1 means conductance is equal to lead conductance               <======== no noise  
    noiseAmpI           = 0.5;     // "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0;     // no noise here 
    noiseFreqE          = 0.;      // spontaneous transmitter release/channel openings
    noiseFreqI          = 0.;      // correlation to time step size !!!
    noiseFreqIB         = 0.;      // should be scaled by the time constant - look at LIF model
    writeSparseActivity = 0;       // 
    writeStep           = -1.0;
    phase		= 6;
};

disable = false;
SigmoidLayer "BipolarSigmoidOFF" = {    //19

    originalLayerName   = "BipolarOFF";
    nxScale             = 1.;
    nyScale             = 1.;
    nf                  = 1;
    InitVType           = "ConstantV";
    valueV              = -40; //-70.0; //-70.0;
    Vrest               = -40; //-70.0; //-66.0;         // BipolarSigmoidOFF
    VthRest             = -30; //-40.0; //-48.0; //-42.0; 
    mirrorBCflag        = 1.0;           //
    restart             = 0.0;           // from graylast
    InverseFlag         = 0.0;
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.1;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 6;
};

//-------------- Small Field Amacrine ON Layer 

disable = false;
LIFGap "SFAmacrineON" = {             //29

    nxScale             = 1; //0.5;    
    nyScale             = 1; //0.5;    // three are fewer horizontal 
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -70.0;
    Vrest               = -70.0;   // adjusted for gap of 0.025 // SFAmacrineON
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 20.0;    // intrinsic leak membrane time constant (max) *******
    tauE                = 1.0;     // how long glutamine stays bound
    tauI                = 5.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = 100000.0;// firing threshold disabled                           <=============== disabled
    tauVth              = 10.0;    // relative refractory period
    deltaVth            = 5.0;     // jump of threshold when firing
    noiseAmpE           = 0.5;     // 1 means conductance is equal to lead conductance               <======== no noise  
    noiseAmpI           = 0.5;     // "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0;     // no noise here 
    noiseFreqE          = 0.;      // spontaneous transmitter release/channel openings
    noiseFreqI          = 0.;      // correlation to time step size !!!
    noiseFreqIB         = 0.;      // should be scaled by the time constant - look at LIF model
    writeSparseActivity = 0;       // no longer an ANN layer 
    writeStep           = -1.0;
    phase		= 7;
};

disable = false;
GapLayer "SFAmacrineGapON" = {          // 10

    originalLayerName   = "SFAmacrineON";
    nxScale             = 1; //0.5;            // 5/18 discussion with Garrett
    nyScale             = 1; //0.5;            // three are fewer horizontal 
    nf                  = 1;
    mirrorBCflag        = 1.0;            // 
    restart             = 0.0;            // from graylast
    InitVType           = "ConstantV";
    valueV              = -70.0;
    ampSpikelet         = 150.0;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 8;
};

disable = false;
SigmoidLayer "SFAmacrineSigmoidON" = {         // 30

    originalLayerName   = "SFAmacrineON";
    nxScale             = 1; //0.5;        // 5/18 discussion with Garrett
    nyScale             = 1; //0.5;        // there are fewer horizontal 
    nf                  = 1;
    InitVType           = "ConstantV";
    valueV              = -70; //-50;
    Vrest               = -70; //-50;      // SFAmacrineSigmoidON
    VthRest             = -50; //-30;      //                            
    mirrorBCflag        = 1.0;        // 
    restart             = 0.0;        // from graylast
    InverseFlag         = 0.0;
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.1;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 8;
};





//-------------- Small Field Amacrine OFF Layer

disable = false;
LIFGap "SFAmacrineOFF" = {             //29

    nxScale             = 1; //0.5;    
    nyScale             = 1; //0.5;    // three are fewer horizontal 
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -70.0;
    Vrest               = -70.0;   // adjusted for gap of 0.025 // SFAmacrineOFF
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 20.0;    // intrinsic leak membrane time constant (max) *******
    tauE                = 1.0;     // how long glutamine stays bound
    tauI                = 5.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = 100000.0;// firing threshold disabled                           <=============== disabled
    tauVth              = 10.0;    // relative refractory period
    deltaVth            = 5.0;     // jump of threshold when firing
    noiseAmpE           = 0.5;     // 1 means conductance is equal to lead conductance               <======== no noise  
    noiseAmpI           = 0.5;     // "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0;     // no noise here 
    noiseFreqE          = 0.;      // spontaneous transmitter release/channel openings
    noiseFreqI          = 0.;      // correlation to time step size !!!
    noiseFreqIB         = 0.;      // should be scaled by the time constant - look at LIF model
    writeSparseActivity = 0;       // no longer an ANN layer 
    writeStep           = -1.0;
    phase		= 7;
};

disable = false;
GapLayer "SFAmacrineGapOFF" = {          // 10

    originalLayerName   = "SFAmacrineOFF";
    nxScale             = 1; //0.5;            // 5/18 discussion with Garrett
    nyScale             = 1; //0.5;            // three are fewer horizontal 
    nf                  = 1;
    mirrorBCflag        = 1.0;            // 
    restart             = 0.0;            // from graylast
    InitVType           = "ConstantV";
    valueV              = -70.0;
    ampSpikelet         = 150.0;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase	        = 8;
};

disable = false;
SigmoidLayer "SFAmacrineSigmoidOFF" = {         // 30

    originalLayerName   = "SFAmacrineOFF";
    nxScale             = 1; //0.5;        // 5/18 discussion with Garrett
    nyScale             = 1; //0.5;        // there are fewer horizontal 
    nf                  = 1;
    InitVType           = "ConstantV";
    valueV              = -70; //-50;
    Vrest               = -70; //-50;     // SFAmacrineSigmoidOFF
    VthRest             = -50; //-30;      //                            
    mirrorBCflag        = 1.0;        // 
    restart             = 0.0;        // from graylast
    InverseFlag         = 0.0;
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.1;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 8;
};



//-------------- Wide Field Amacrine Layer --------------//

disable = false;
LIF "WFAmacrineON" = {            //9

    nxScale             = .25;        // 5/18 discussion with Garrett
    nyScale             = .25;        // three are fewer horizontal 
    nf                  = 1;          // one feature for now
    mirrorBCflag        = 1.0;        // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -70.0;
    Vrest               = -70.0;      // adjusted for gap of 0.025 // WFAmacrineON 
    restart             = 0.0;        // from graylast
    Vexc                = 0.0;        // reversal potential 
    Vinh                = -75.0;      // chloride channel
    VinhB               = -90.0;      // potassium reversal
    tau                 = 20.0;       // intrinsic leak membrane time constant (max)
    tauE                = 1.0;        // how long glutamine stays bound
    tauI                = 5.0;        // how long GABA stays bound
    tauIB               = 10.0;       // inhibitory potassium channel 
    VthRest             = 100000.0;   // firing threshold disabled                           <=============== disabled
    tauVth              = 10.0;       // relative refractory period
    deltaVth            = 5.0;        // jump of threshold when firing
    noiseAmpE           = 0.5;        // 1 means conductance is equal to lead conductance               <======== no noise  
    noiseAmpI           = 0.5;        // "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0;        // no noise here 
    noiseFreqE          =  0.;        // spontaneous transmitter release/channel openings
    noiseFreqI          =  0.;        // correlation to time step size !!!
    noiseFreqIB         =   0.;       // should be scaled by the time constant - look at LIF model
    writeSparseActivity = 0;          // specifies binary output 
    writeStep           = -1.0;
    phase		= 7;
};

disable = false;
SigmoidLayer "WFAmacrineSigmoidON" = {  // 11

    originalLayerName   = "WFAmacrineON";
    nxScale             = .25;            // 5/18 discussion with Garrett
    nyScale             = .25;            // three are fewer horizontal 
    nf                  = 1;
    InitVType           = "ConstantV";
    valueV              = -70.0;
    Vrest               = -70.0;          // WFAmacrineSigmoidON
    VthRest             = -40.0;          //                            <=============== disabled
    mirrorBCflag        = 1.0;            // 
    restart             = 0.0;            // from graylast
    InverseFlag         = 0.0;
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.1;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase	        = 8;
};

disable = false;
LIF "WFAmacrineOFF" = {      //20

    nxScale             = .25;     // 5/18 discussion with Garrett
    nyScale             = .25;     // three are fewer horizontal 
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -70.0;
    Vrest               = -70.0;   // adjusted for gap of 0.025 // WFAmacrineOFF
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 20.0;    // intrinsic leak membrane time constant (max)
    tauE                = 1.0;     // how long glutamine stays bound
    tauI                = 5.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = 100000.0;// firing threshold disabled                           <=============== disabled
    tauVth              = 10.0;    // relative refractory period
    deltaVth            = 5.0;     // jump of threshold when firing
    noiseAmpE           = 0.5;     // 1 means conductance is equal to lead conductance               <======== no noise  
    noiseAmpI           = 0.5;     // "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0;     // no noise here 
    noiseFreqE          =  0.;     // spontaneous transmitter release/channel openings
    noiseFreqI          =  0.;     // correlation to time step size !!!
    noiseFreqIB         =   0.;    // should be scaled by the time constant - look at LIF model 
    writeSparseActivity = 0;       // no longer an ANN layer 
    writeStep           = -1.0;
    phase		= 7;
};

disable = false;
SigmoidLayer "WFAmacrineSigmoidOFF" = {   // 22

    originalLayerName   = "WFAmacrineOFF";
    nxScale             = .25; //0.5;              // 5/18 discussion with Garrett
    nyScale             = .25; //0.5;              // three are fewer horizontal 
    nf                  = 1;
    InitVType           = "ConstantV";
    valueV              = -70.0;
    Vrest               = -70.0;            // WFAmacrineSigmoidOFF
    VthRest             = -40.0;            //                            <=============== disabled
    mirrorBCflag        = 1.0;              // 
    restart             = 0.0;              // from graylast
    InverseFlag         = 0.0;
    SigmoidFlag         = 1;
    SigmoidAlpha        = 0.1;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 8;
};




//--------------  Poly Axonal Amacrine Layer  -------------------//

disable = false;
LIFGap "PAAmacrineON" = {        // 14

    nxScale             = 0.25;
    nyScale             = 0.25;
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -70.;
    Vrest               = -70.;    // same as Ganglion after gray // PAAmacrineON
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 5.0; //10.0;    // intrinsic leak membrane time constant (max)
    tauE                = 1.0;     // how long glutamine stays bound
    tauI                = 1.25; //2.5;//5.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = -55.;    // has to be high enough to not fire before the ganglion
    tauVth              = 10.0;    // relative refractory period
    deltaVth            = 5.0;     // jump of threshold when firing
    noiseAmpE           = 0.5;     // 0.5 1 means conductance is equal to lead conductance  
    noiseAmpI           = 0.5;     // 0.5 "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0;     // no noise here 
    noiseFreqE          = 0.;      // spontaneous transmitter release/channel openings
    noiseFreqI          = 0.;      // correlation to time step size !!!
    noiseFreqIB         = 0.;      // should be scaled by the time constant - look at LIF model
    initialWriteTime    = 0;  
    writeSparseActivity = 1;       // the whole idea 
    writeStep           = 1.0;
    phase		= 9;
   
};

disable = false;
GapLayer "PAAmacrineGapON" = {           // 15

    originalLayerName   = "PAAmacrineON";
    nxScale             = 0.25;
    nyScale             = 0.25;
    nf                  = 1;
    mirrorBCflag        = 1.0;         // 
    restart             = 0.0;         // from graylast
    InitVType           = "ConstantV";
    valueV              = -70.;
    ampSpikelet         = 100;
    writeStep           = -1;
    writeSparseActivity = 0.0;
    phase		= 10;
};

disable = false;
LIFGap "PAAmacrineOFF" = {      // 25

    nxScale             = 0.25;
    nyScale             = 0.25;
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    InitVType           = "ConstantV";
    valueV              = -70.;
    Vrest               = -70.;    // same as Ganglion after gray // PAAmacrineOFF
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 10.0;    // intrinsic leak membrane time constant (max)
    tauE                = 1.0;     // how long glutamine stays bound
    tauI                = 1.25; //2.5;//5.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = -55;     // has to be high enough to not fire the ganglion first
    tauVth              = 10.0;    // relative refractory period
    deltaVth            = 5.0;     // jump of threshold when firing
    noiseAmpE           = 0.5;     // 0.5 1 means conductance is equal to lead conductance  
    noiseAmpI           = 0.5;     // 0.5 "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0;     // no noise here 
    noiseFreqE          = 0.;      // spontaneous transmitter release/channel openings
    noiseFreqI          = 0.;      // correlation to time step size !!!
    noiseFreqIB         = 0.;      // should be scaled by the time constant - look at LIF model
    initialWriteTime    = 0;    
    writeSparseActivity = 1;       // the whole idea 
    writeStep           = 1.0;
    phase		= 9;

};

disable = false;
GapLayer "PAAmacrineGapOFF" = {           // 26

    originalLayerName   = "PAAmacrineOFF";
    nxScale             = 0.25;
    nyScale             = 0.25;
    nf                  = 1;
    mirrorBCflag        = 1.0;        //
    restart             = 0.0;        // from graylast
    InitVType           = "ConstantV";
    valueV              = -70.;
    ampSpikelet         = 100;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 10;
};



//-------------  Ganglion Layer -----------------------//

disable = false;
LIFGap "GanglionON" = {         // 12

    nxScale             = 0.5;
    nyScale             = 0.5;
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -70.;
    Vrest               = -70.;    // GanglionON
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 10.0;    // intrinsic leak membrane time constant (max)
    tauE                = 1.0; //2.5;     // how long glutamine stays bound
    tauI                = 3.0; //1.25; //2.5;//5.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = -60; //-55.0;   // firing threshold 15 mV above rest
//    VthRest           = 100;     // Large threshold turns off spiking
    tauVth              = 10.0;    // 10.0 relative refractory period
    deltaVth            = 5.0;     // jump of threshold when firing
    noiseAmpE           = 0.0;     // 0.5 1 means conductance is equal to lead conductance  gjk
    noiseAmpI           = 0.0;     // 0,5 "twice as easy for the membrane capacitance to discharge" gjk
    noiseAmpIB          = 0.0;     // no noise here 
    noiseFreqE          = 250.;    // spontaneous transmitter release/channel openings
    noiseFreqI          = 250.;    // correlation to time step size !!!
    noiseFreqIB         = 0.;      // should be scaled by the time constant - look at LIF model
    initialWriteTime    = 0;
    writeSparseActivity = 1;       // the whole idea 
    writeStep           = 1.0;
    phase		= 11;

};

disable = false;
GapLayer "GanglionGapON" = {          // 13

    originalLayerName   = "GanglionON";
    nxScale             = 0.5;
    nyScale             = 0.5;
    nf                  = 1;
    mirrorBCflag        = 1.0;        // 
    restart             = 0.0;        // from graylast
    InitVType           = "ConstantV";
    valueV              = -70.;
    ampSpikelet         = 100;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase               = 12;
};

disable = false;
LIFGap "GanglionOFF" = {        // 23

    nxScale             = 0.5;
    nyScale             = 0.5;
    nf                  = 1;       // one feature for now
    mirrorBCflag        = 1.0;     // mirroring boundary conditions
    InitVType           = "ConstantV";
    method              = "arma"; // Chooses a method for integrating equations for membrane potential
    valueV              = -70.;
    Vrest               = -70.;    // GanglionOFF
    restart             = 0.0;     // from graylast
    Vexc                = 0.0;     // reversal potential 
    Vinh                = -75.0;   // chloride channel
    VinhB               = -90.0;   // potassium reversal
    tau                 = 10.0;    // intrinsic leak membrane time constant (max)
    tauE                = 1.0; //2.5;     // how long glutamine stays bound
    tauI                = 3.0; //1.25; //2.5;//5.0;     // how long GABA stays bound
    tauIB               = 10.0;    // inhibitory potassium channel 
    VthRest             = -60; //-55.0;   // firing threshold 15 mV above rest
//    VthRest           = 100.0;   // Large threshold turns off spiking
    tauVth              = 10.0;    // relative refractory period
    deltaVth            = 5.0;     // jump of threshold when firing
    noiseAmpE           = 0.0;     // 0.5 1 means conductance is equal to lead conductance  
    noiseAmpI           = 0.0;     // 0,5 "twice as easy for the membrane capacitance to discharge"
    noiseAmpIB          = 0.0;     // no noise here 
    noiseFreqE          = 250.;    // spontaneous transmitter release/channel openings
    noiseFreqI          = 250.;    // correlation to time step size !!!
    noiseFreqIB         = 0.;      // should be scaled by the time constant - look at LIF model
    initialWriteTime    = 0;
    writeSparseActivity = 1;       // the whole idea 
    writeStep           = 1.0;
    phase		= 11;

};

disable = false;
GapLayer "GanglionGapOFF" = {         // 24

    originalLayerName   = "GanglionOFF";
    nxScale             = 0.5;
    nyScale             = 0.5;
    nf                  = 1;
    mirrorBCflag        = 1.0;        // 
    restart             = 0.0;        // from graylast
    InitVType           = "ConstantV";
    valueV              = -70.;
    ampSpikelet         = 100;
    writeSparseActivity = 0.0;
    writeStep           = -1;
    phase		= 12;
};




//////////////////////////////////////////////////////////////////////////////////////////
//   Connections Connections Connections Connections  Connections Connections Connections
//   Connections Connections Connections Connections  Connections Connections Connections
//   Connections Connections Connections Connections  Connections Connections Connections
//   Connections Connections Connections Connections  Connections Connections Connections
//   Connections Connections Connections Connections  Connections Connections Connections
//   Connections Connections Connections Connections  Connections Connections Connections
//   Connections Connections Connections Connections  Connections Connections Connections
//   Connections Connections Connections Connections  Connections Connections Connections
//   Connections Connections Connections Connections  Connections Connections Connections
//   Connections Connections Connections Connections  Connections Connections Connections
//   Connections Connections Connections Connections  Connections Connections Connections
//////////////////////////////////////////////////////////////////////////////////////////

disable = false;

KernelConn "ImageToImageBuffer" = {
   
    preLayerName           = "Movie";
    postLayerName          = "ImageBuffer";
    channelCode            = 0;    // forward
    nxp                    = 1;
    nyp                    = 1;
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;  // in time steps, additional to the one you always get

    weightInitType         = "UniformWeight";
    weightInit             = 20; //40.0; // This is scaling the image to 0-40
    normalizeMethod        = "none";    //
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0; // do not write these out
    writeCompressedCheckpoints = 0;
};

disable = false;
KernelConn "ConstantVrestToImageBuffer" = {   

    preLayerName           = "ConstantVrest";
    postLayerName          = "ImageBuffer";
    channelCode            = 0;    // move it down to -55
    nxp                    = 1;
    nyp                    = 1;
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;  // in time steps, additional to the one you always get

    weightInitType         = "UniformWeight";
    weightInit             = 1; //1;      //1.0;//  This will give a G_E of 0.25 to sit
    normalizeMethod        = "none";    //
    pvpatchAccumulateType  = "convolve";
    selfFlag               = 0.0;
    preActivityIsNotRate   = 0;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0; // do not write these out
    writeCompressedCheckpoints = 0;
};

disable = false;
GapConn "ImageBufferToCone" = {          // 0

    preLayerName           = "ImageBuffer";
    postLayerName          = "Cone";
    nxp                    = 1;
    nyp                    = 1;
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;       // in time steps, additional to the one you always get

    weightInitType         = "UniformWeight";
    weightInit             = 6; //1; // ImageCone adjusted to give symmetric ON/OFF response staerke
    normalizeMethod        = "normalizeSum";    
    strength               = 6;     // 
    normalize_cutoff       = 0;      //
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;  // gap junction connection, so already scaled correctly
    normalizeFromPostPerspective = 1; // not used for UniformWeight init method
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;      // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


//--------- Cone ---------------------//

disable = false;
KernelConn "ConeSigmoidONToBipolarON" = {        // 1

    preLayerName           = "ConeSigmoidON";
    postLayerName          = "BipolarON";
    channelCode            = 0;      // forward
    nxp                    = 3;
    nyp                    = 3;
    nfp                    = 1.0;    // should fit the feature number of post synaptic layer
    numAxonalArbors        = 1;
    shrinkPatches          = 0;
    delay                  = 0.0;    // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";      //  
    strength               = 1;  //0.5; 
    normalize_cutoff       = 0;      //
    aspect                 = 1.0;
    sigma                  = 0.5;    // 
    rMax                   = 256.;   // maximum distance of connection
    rMin                   = 0.0;
    symmetrizeWeights      = 0;
    selfFlag               = 0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 1;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0;
    updateGSynFromPostPerspective = 0;
    	
    writeStep              = -1;     // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
    
};

disable = false;
KernelConn "ConeSigmoidOFFToBipolarOFF" = {        // 1

    preLayerName           = "ConeSigmoidOFF";
    postLayerName          = "BipolarOFF";
    channelCode            = 0;       // forward
    nxp                    = 3;
    nyp                    = 3;
    nfp                    = 1.0;     // should fit the feature number of post synaptic layer
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;     // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";     // 
    normalize_cutoff       = 0.0;     //
    strength               = 1; //0.5; 
    aspect                 = 1.0;
    sigma                  = 0.5;     // 
    rMax                   = 256.;    // maximum distance of connection    	
    rMin                   = 0.0;
    selfFlag               = 0.0;
    symmetrizeWeights      = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 1;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;    // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "ConeSigmoidToHorizontal" = {      // 2

    preLayerName           = "ConeSigmoid";
    postLayerName          = "Horizontal";
    channelCode            = 0;                   // forward
    nxp                    = 3;                   // odd times 1 because of scale factor
    nyp                    = 3;                   //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;                 // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";                 //  
    strength               = .5; //0.5;
    normalize_cutoff       = 0.0;                 //
    aspect                 = 1.0;                 //
    sigma                  = 2.0;                 // 
    rMax                   = 256.;                // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    pvpatchAccumulateType  = "convolve";
    selfFlag               = 0.0;
    preActivityIsNotRate   = 1;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1;                  // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


//--------- Horizontal ---------------------//


disable = false;
GapConn "HorizontalGapToHorizontal" = {        // 3  gap junction, watch the strength

    preLayerName           = "HorizontalGap";
    postLayerName          = "Horizontal";
    nxp                    = 3;           // not to itself !!
    nyp                    = 3;
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           // 
    strength               = 3; //3; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection
    rMin                   = 0.1;         // take out the self connection
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    normalizeFromPostPerspective = 1;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;           // input via gap
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = false;
KernelConn "HorizontalSigmoidToConeON" = {        // 4

    preLayerName           = "HorizontalSigmoidON";
    postLayerName          = "Cone";
    channelCode            = 1;               // inhibitory   feedback
    nxp                    = 12;               // odd times 2 because of scale factor
    nyp                    = 12;               // 
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;             // in time steps, additional to the one you always get
    	
    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";             //  
    strength               = 2; //1; 
    normalize_cutoff       = 0.0;             //
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    aspect                 = 1.0;
    sigma                  = 0.75;             // 
    rMax                   = 256.;            // maximum distance of connection
    rMin                   = 0.0;
    normalizeFromPostPerspective = 1;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;            // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = true;
KernelConn "HorizontalSigmoidToBipolarOFF" = {        // 4

    preLayerName           = "HorizontalSigmoidOFF";
    postLayerName          = "BipolarOFF";
    channelCode            = 1;               // inhibitory   feedback
    nxp                    = 12;               // odd times 2 because of scale factor
    nyp                    = 12;               // 
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;             // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";             //  
    strength               = 0; //0; 
    normalize_cutoff       = 0.0;             //
    aspect                 = 1.0;
    sigma                  = 0.75;             // 
    rMin                   = 0.0;
    rMax                   = 256.;            // maximum distance of connection
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 1;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0; 
    updateGSynFromPostPerspective = 0;   	

    writeStep              = -1.0;            // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};





//--------- Bipolar Connections  ---------------------//

disable = false;
KernelConn "BipolarSigmoidONToSFAmacrineON" = {        // 2

    preLayerName           = "BipolarSigmoidON";
    postLayerName          = "SFAmacrineON";
    channelCode            = 0;           // forward
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 1; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = false;
KernelConn "BipolarSigmoidOFFToSFAmacrineOFF" = {        // 2

    preLayerName           = "BipolarSigmoidOFF";
    postLayerName          = "SFAmacrineOFF";
    channelCode            = 0;           // forward
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 1; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "BipolarSigmoidONToWFAmacrineON" = {  // 2

    preLayerName           = "BipolarSigmoidON";
    postLayerName          = "WFAmacrineON";
    channelCode            = 0;           // forward
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 1; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = false;
KernelConn "BipolarSigmoidOFFToWFAmacrineOFF" = {        // 2

    preLayerName           = "BipolarSigmoidOFF";
    postLayerName          = "WFAmacrineOFF";
    channelCode            = 0;           // forward
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 1; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = true;
KernelConn "BipolarSigmoidONToPAAmacrineON" = {  // 2

    preLayerName           = "BipolarSigmoidON";
    postLayerName          = "PAAmacrineON";
    channelCode            = 0;           // forward
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 0; //0.1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 2.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = true;
KernelConn "BipolarSigmoidOFFToPAAmacrineOFF" = {  // 2

    preLayerName           = "BipolarSigmoidOFF";
    postLayerName          = "PAAmacrineOFF";
    channelCode            = 0;           // forward
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 0; //0.1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 2.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = false;
KernelConn "BipolarSigmoidONToGanglionON" = {        // 5  sigmoid, need linear output ?

    preLayerName           = "BipolarSigmoidON";
    postLayerName          = "GanglionON";
    channelCode            = 0;           // forward
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 5; //3; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = false;
KernelConn "BipolarSigmoidOFFToGanglionOFF" = {        // 5  sigmoid, need linear output ?

    preLayerName           = "BipolarSigmoidOFF";
    postLayerName          = "GanglionOFF";
    channelCode            = 0;           // forward
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 5; //3; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};




//--------- SFAmacrine Connections ---------------------//


disable = false;
GapConn "SFAmacrineGapONToSFAmacrineOFF" = {        // 3  gap junction, watch the strength

    preLayerName           = "SFAmacrineGapON";
    postLayerName          = "SFAmacrineOFF";
    nxp                    = 1; //3;           // odd times 1 because of scale factor
    nyp                    = 1; //3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = .25; //1; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0; //0.1;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;   // input via gap
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
GapConn "SFAmacrineGapOFFToSFAmacrineON" = {        // 3  gap junction, watch the strength

    preLayerName           = "SFAmacrineGapOFF";
    postLayerName          = "SFAmacrineON";
    nxp                    = 1; //3;           // odd times 1 because of scale factor
    nyp                    = 1; //3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = .25; //1; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0; //0.1;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;   // input via gap
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "SFAmacrineSigmoidONToGanglionON" = {        // 4

    preLayerName           = "SFAmacrineSigmoidON";
    postLayerName          = "GanglionON";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 1; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = false;
KernelConn "SFAmacrineSigmoidOFFToGanglionOFF" = {   // 4

    preLayerName           = "SFAmacrineSigmoidOFF";
    postLayerName          = "GanglionOFF";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 1; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};




//--------- WFAmacrine Connections ---------------------//


disable = false;
KernelConn "WFAmacrineSigmoidONToBipolarON" = {        // 4

    preLayerName           = "WFAmacrineSigmoidON";
    postLayerName          = "BipolarON";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 12; //6;           // odd times 1 because of scale factor
    nyp                    = 12; //6;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 0.1; //0.1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1; //0.75;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = false;
KernelConn "WFAmacrineSigmoidOFFToBipolarOFF" = {        // 4

    preLayerName           = "WFAmacrineSigmoidOFF";
    postLayerName          = "BipolarOFF";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 12; //6;           // odd times 1 because of scale factor
    nyp                    = 12; //6;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 0.1; //0.1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1; //0.75;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "WFAmacrineSigmoidONToSFAmacrineON" = {  // 4

    preLayerName           = "WFAmacrineSigmoidON";
    postLayerName          = "SFAmacrineON";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 12; //6; //3;           // odd times 1 because of scale factor
    nyp                    = 12; //6; //3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 0.25; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 0.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = false;
KernelConn "WFAmacrineSigmoidOFFToSFAmacrineOFF" = {        // 4

    preLayerName           = "WFAmacrineSigmoidOFF";
    postLayerName          = "SFAmacrineOFF";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 12; //6; //3;           // odd times 1 because of scale factor
    nyp                    = 12; //6; //3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 0.25; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 0.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = true;
KernelConn "WFAmacrineSigmoidONToGanglionON" = { // 4

    preLayerName           = "WFAmacrineSigmoidON";
    postLayerName          = "GanglionON";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 0; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 0.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};

disable = true;
KernelConn "WFAmacrineSigmoidOFFToGanglionOFF" = { // 4

    preLayerName           = "WFAmacrineSigmoidOFF";
    postLayerName          = "GanglionOFF";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 0; //1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 0.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "stochastic";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};





//--------- PAAmacrine Connections ---------------------//

disable = false;
KernelConn "PAAmacrineONToBipolarON" = {        // 4

    preLayerName           = "PAAmacrineON";
    postLayerName          = "BipolarON";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 36;           // odd times 1 because of scale factor
    nyp                    = 36;          //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 2; //0.1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 9;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "PAAmacrineOFFToBipolarOFF" = {        // 4

    preLayerName           = "PAAmacrineOFF";
    postLayerName          = "BipolarOFF";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 36;           // odd times 1 because of scale factor
    nyp                    = 36;          //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 2; //0.1; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1;
    sigma                  = 9;        // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "PAAmacrineONToWFAmacrineON" = {     // 4

    preLayerName           = "PAAmacrineON";
    postLayerName          = "WFAmacrineON";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 9; //18;           // odd times 1 because of scale factor
    nyp                    = 9; //18;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 2.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 2; //2; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 4.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "PAAmacrineOFFToWFAmacrineOFF" = {   // 4

    preLayerName           = "PAAmacrineOFF";
    postLayerName          = "WFAmacrineOFF";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 9; //18;           // odd times 1 because of scale factor
    nyp                    = 9; //18;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 2.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 2; //2; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 4.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
GapConn "PAAmacrineGapONToPAAmacrineON" = {        // 9  gap junction, watch the strength

    preLayerName           = "PAAmacrineGapON";
    postLayerName          = "PAAmacrineON";
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 1.5; //1.5; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.1;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
GapConn "PAAmacrineGapOFFToPAAmacrineOFF" = {        // 9  gap junction, watch the strength

    preLayerName           = "PAAmacrineGapOFF";
    postLayerName          = "PAAmacrineOFF";
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 1.5; //1.5; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.1;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "PAAmacrineONToPAAmacrineON" = {        // 10

    preLayerName           = "PAAmacrineON";
    postLayerName          = "PAAmacrineON";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 9;           // odd times 1 because of scale factor
    nyp                    = 9;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 2.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 3; //3; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 2.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "PAAmacrineOFFToPAAmacrineOFF" = {   // 10 self shut down

    preLayerName           = "PAAmacrineOFF";
    postLayerName          = "PAAmacrineOFF";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 9;           // odd times 1 because of scale factor
    nyp                    = 9;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 2.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 3; //3; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 2.0;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
GapConn "PAAmacrineGapONToGanglionON" = {        // 8   gap junction

    preLayerName           = "PAAmacrineGapON";
    postLayerName          = "GanglionON";
    nxp                    = 6;           // odd times 1 because of scale factor
    nyp                    = 6;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 0.5; //0.5; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.1;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
GapConn "PAAmacrineGapOFFToGanglionOFF" = {          // 8   gap junction

    preLayerName           = "PAAmacrineGapOFF";
    postLayerName          = "GanglionOFF";
    nxp                    = 6;           // odd times 1 because of scale factor
    nyp                    = 6;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 0.5; //0.5; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.1;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "PAAmacrineONToGanglionON" = {        // 10 NOT CONNECTED

    preLayerName           = "PAAmacrineON";
    postLayerName          = "GanglionON";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 18;           // odd times 1 because of scale factor
    nyp                    = 18;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 2.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 48; //24; //24; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 9; //4.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
KernelConn "PAAmacrineOFFToGanglionOFF" = {     // 10 NOT CONNECTED

    preLayerName           = "PAAmacrineOFF";
    postLayerName          = "GanglionOFF";
    channelCode            = 1;                   // inhibitory   feedback
    nxp                    = 18;           // odd times 1 because of scale factor
    nyp                    = 18;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 2.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 48; //24; //24; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 9; //4.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.0;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};





//--------- Ganglion ---------------------//

disable = false;
GapConn "GanglionGapONToPAAmacrineON" = {        // 7  gap junction

    preLayerName           = "GanglionGapON";
    postLayerName          = "PAAmacrineON";
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 3; //3; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.1;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};


disable = false;
GapConn "GanglionGapOFFToPAAmacrineOFF" = {       // 7  gap junction

    preLayerName           = "GanglionGapOFF";
    postLayerName          = "PAAmacrineOFF";
    nxp                    = 3;           // odd times 1 because of scale factor
    nyp                    = 3;           //
    nfp                    = 1;
    numAxonalArbors        = 1;
    shrinkPatches          = 0.0;
    delay                  = 0.0;         // in time steps, additional to the one you always get

    weightInitType         = "Gauss2DWeight";
    normalizeMethod        = "normalizeSum";           //  
    strength               = 3; //3; 
    normalize_cutoff       = 0.0;         //
    aspect                 = 1.0;
    sigma                  = 1.5;         // 
    rMax                   = 256.;        // maximum distance of connection was 1.4
    rMin                   = 0.1;
    symmetrizeWeights      = 0.0;
    selfFlag               = 0.0;
    pvpatchAccumulateType  = "convolve";
    preActivityIsNotRate   = 0;
    normalizeFromPostPerspective = 1;
    plasticityFlag         = 0.0;
    updateGSynFromPostPerspective = 0;

    writeStep              = -1.0;        // do not write these out
    writeCompressedCheckpoints   = 0;
    normalizeArborsIndividually  = 0;
    minSumTolerated	   = 0;
};







//////////////////////////////////////////////////////////////////////////////////////////
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//   Probes Probes Probes Probes Probes Probes Probes Probes  Probes Probes Probes Probes 
//////////////////////////////////////////////////////////////////////////////////////////


disable = false;

PointProbe "ImageBuffer Probe" = {
   targetLayer = "ImageBuffer";
//   msg = "Cone       ";
   probeOutputFile = "ptImageBuffer.txt";
   xLoc = 64; // 128; //
   yLoc = 64; // 128; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "Cone Probe" = {
   targetLayer = "Cone";
//   msg = "Cone       ";
   probeOutputFile = "ptCone.txt";
   xLoc = 64; // 128; //
   yLoc = 64; // 128; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "Horizontal Probe" = {
   targetLayer = "Horizontal";
//   msg = "Horizontal       ";
   probeOutputFile = "ptHorizontal.txt";
   xLoc = 16; // 32; //
   yLoc = 16; // 32; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "BipolarON Probe" = {
   targetLayer = "BipolarON";
//   msg = "BipolarON       ";
   probeOutputFile = "ptBipolarON.txt";
   xLoc = 64; // 128; //
   yLoc = 64; // 128; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "BipolarOFF Probe" = {
   targetLayer = "BipolarOFF";
//   msg = "BipolarOFF       ";
   probeOutputFile = "ptBipolarOFF.txt";
   xLoc = 64; // 128; //
   yLoc = 64; // 128; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "WFAmacrineON Probe" = {
   targetLayer = "WFAmacrineON";
//   msg = "WFAmacrineON       ";
   probeOutputFile = "ptWFAmacrineON.txt";
   xLoc = 16; //32; // 64; //
   yLoc = 16; //32; // 64; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "WFAmacrineOFF Probe" = {
   targetLayer = "WFAmacrineOFF";
//   msg = "WFAmacrineOFF       ";
   probeOutputFile = "ptWFAmacrineOFF.txt";
   xLoc = 16; //32; // 64; //
   yLoc = 16; //32; // 64; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "SFAmacrineON Probe" = {
   targetLayer = "SFAmacrineON";
//   msg = "SFAmacrineON       ";
   probeOutputFile = "ptSFAmacrineON.txt";
   xLoc = 64; // 64; //
   yLoc = 64; // 64; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "SFAmacrineOFF Probe" = {
   targetLayer = "SFAmacrineOFF";
//   msg = "SFAmacrineOFF       ";
   probeOutputFile = "ptSFAmacrineOFF.txt";
   xLoc = 64; // 64; //
   yLoc = 64; // 64; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "PAAmacrineON Probe" = {
   targetLayer = "PAAmacrineON";
//   msg = "PAAmacrineON       ";
   probeOutputFile = "ptPAAmacrineON.txt";
   xLoc = 16; // 32; //
   yLoc = 16; // 32; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "PAAmacrineOFF Probe" = {
   targetLayer = "PAAmacrineOFF";
//   msg = "PAAmacrineOFF       ";
   probeOutputFile = "ptPAAmacrineOFF.txt";
   xLoc = 16; // 32; //
   yLoc = 16; // 32; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "GanglionON Probe" = {
   targetLayer = "GanglionON";
//   msg = "GanglionON       ";
   probeOutputFile = "ptGanglionON.txt";
   xLoc = 32; // 64; //
   yLoc = 32; // 64; //
   fLoc = 0;
};

disable = false;

PointLIFProbe "GanglionOFF Probe" = {
   targetLayer = "GanglionOFF";
//   msg = "GanglionOFF       ";
   probeOutputFile = "ptGanglionOFF.txt";
   xLoc = 32; // 64; //
   yLoc = 32; // 64; //
   fLoc = 0;
};
